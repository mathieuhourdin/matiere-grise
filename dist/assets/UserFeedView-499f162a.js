import{d as g,l as B,q as b,r as c,g as y,x as I,c as i,i as o,t as _,p as $,w as k,y as N,a as f,k as a,n as E,e as w,o as u,u as x}from"./index-35a437a2.js";import{_ as p}from"./TextInput.vue_vue_type_script_setup_true_lang-c7ce0f83.js";import{d as T,r as h,b as q,c as D,u as P}from"./ResourceComponent.vue_vue_type_script_setup_true_lang-3aedccca.js";import{_ as R}from"./CreateThoughtInput.vue_vue_type_script_setup_true_lang-bba3ad29.js";import"./TextInterface.vue_vue_type_script_setup_true_lang-a4f489ea.js";import"./useResource-80f651cd.js";import"./useProblem-d1fd777d.js";const j={class:"text-center p-4 bg-slate-200"},A={key:0},F=["src"],H={class:"text-2xl bold"},M={key:1},S={class:"flex mx-auto"},z={key:0,class:"flex"},G={class:"flex flex-row-reverse"},J=g({__name:"UserInfos",props:{user:{}},setup(V){const r=V,{user:d,debouncedUpdateUser:U}=w(),v=B(),m=b(()=>!r.user.is_platform_user||r.user.id===d.value.id),n=c(!1),s=c(null);return y(()=>{s.value=r.user,n.value=v.query.editingUser}),I(s,t=>U(t.id,t),{deep:!0}),(t,e)=>(u(),i("div",j,[n.value?(u(),i("div",M,[a(p,{class:"mx-auto w-2/3",modelValue:s.value.profile_picture_url,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.profile_picture_url=l),label:"Photo de profil"},null,8,["modelValue"]),o("div",S,[a(p,{class:"ml-auto",modelValue:s.value.first_name,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.first_name=l),label:"Prénom"},null,8,["modelValue"]),a(p,{class:"mr-auto",modelValue:s.value.last_name,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.last_name=l),label:"Nom"},null,8,["modelValue"])]),s.value.is_platform_user?(u(),i("div",z,[a(p,{class:"ml-auto",modelValue:s.value.handle,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.handle=l),label:"Handle"},null,8,["modelValue"]),a(p,{class:"mr-auto",modelValue:s.value.email,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.email=l),label:"Email"},null,8,["modelValue"])])):f("",!0),o("div",null,[a(T,{modelValue:s.value.biography,"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.biography=l),label:"Bio"},null,8,["modelValue"])]),o("div",G,[a(E,{onClick:e[7]||(e[7]=l=>n.value=!1),text:"Valider",type:"valid"})])])):(u(),i("div",A,[o("img",{src:t.user.profile_picture_url,class:"mx-auto m-4 w-1/6"},null,8,F),o("div",H,_(t.user.first_name)+" "+_(t.user.last_name),1),o("div",null,_(t.user.handle),1),o("div",null,_(t.user.email),1),m.value?(u(),$(N,{key:0,class:"right-4 absolute",onClick:e[0]||(e[0]=l=>n.value=!0)},{default:k(()=>[a(x(h),{class:"m-1"})]),_:1})):f("",!0)]))]))}}),K={class:"m-8"},L=o("div",{class:"text-center m-4 italic text-sm"},"Derniers apports extérieurs",-1),se=g({__name:"UserFeedView",props:{pageUserId:{}},setup(V){const r=V,d=c(!1),{getUserById:U,user:v}=w(),m=c(null),{getUserThoughtInputs:n}=P(),s=c([]),t=b(()=>s.value.map(e=>({resource:e.resource,date:e.interaction_date,user_id:e.interaction_user_id,context_comment:e.interaction_comment,progress:e.interaction_progress})));return y(async()=>{m.value=await U(r.pageUserId),s.value=await n(r.pageUserId)}),(e,l)=>(u(),i("div",null,[o("div",K,[m.value?(u(),$(J,{key:0,class:"mx-auto border my-8",user:m.value},null,8,["user"])):f("",!0),L,x(v)&&e.pageUserId==x(v).id?(u(),i("div",{key:1,class:"italic underline text-xs",onClick:l[0]||(l[0]=C=>d.value=!0)}," Ajouter un nouvel apport ")):f("",!0),a(q,{open:d.value},{default:k(()=>[a(R,{onClose:l[1]||(l[1]=C=>d.value=!1)})]),_:1},8,["open"]),a(D,{class:"mx-auto","contextual-resources":t.value},null,8,["contextual-resources"])])]))}});export{se as default};
