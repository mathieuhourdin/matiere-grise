import{e as l,a as u,g as r,d as p,t as d,F as _,m as f,r as h,o as g,K as w,w as v,B as b,y as k,L as y,M as x,k as V,G as i,H as $}from"./index-0a240239.js";function O(e,n){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})])}const C={class:"block text-2xs text-slate-800"},S=["value"],E=["value"],z=p({__name:"SelectInput",props:{label:{},choices:{},modelValue:{},displayFunction:{type:Function,default:e=>e.text}},emits:["update:modelValue"],setup(e,{emit:n}){const a=s=>{console.log(s.target.value),n("update:modelValue",s.target.value)};return(s,o)=>(l(),u("div",null,[r("label",C,d(s.label),1),r("select",{value:s.modelValue,name:"Stade d'écriture",class:"text-xs w-full p-1 block rounded border-2 border-neutral-400",onInput:o[0]||(o[0]=t=>a(t))},[(l(!0),u(_,null,f(s.choices,t=>(l(),u("option",{key:t.value,value:t.value},d(s.displayFunction(t)),9,E))),128))],40,S)]))}}),D={class:"m-4"},L={class:"block text-2xs text-slate-800"},B=["value","placeholder"],R=p({__name:"TextAreaInput",props:{label:{},modelValue:{},placeholder:{}},emits:["update:modelValue"],setup(e,{emit:n}){const a=s=>{n("update:modelValue",s.target.value)};return(s,o)=>(l(),u("div",D,[r("label",L,d(s.label),1),r("textarea",{class:"border border-neutral-800 block h-full w-full",value:s.modelValue,placeholder:s.placeholder,onInput:o[0]||(o[0]=t=>a(t))},null,40,B)]))}}),I={class:"flex"},j=p({__name:"ModalSheet",props:{open:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const a=e,s=h(!1);return g(()=>{s.value=a.open}),w(()=>{const o=t=>{(t.key==="Escape"||t.key==="Enter"||t.key==="Esc"||t.keyCode===27)&&n("close")};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}}),v(b(a).open,o=>s.value=o),(o,t)=>s.value?(l(),u("div",{key:0,tabindex:"0",onKeyup:t[2]||(t[2]=x(m=>n("close"),["esc"])),class:"fixed top-0 left-0 w-full h-full z-10 bg-slate-500/50",onClick:t[3]||(t[3]=m=>n("close"))},[r("div",{class:"max-w-xl overflow-y-scroll max-h-screen mb-10 bg-white mx-auto mt-6 p-4 rounded shadow",onClick:t[1]||(t[1]=y(()=>{},["stop"]))},[r("div",I,[r("div",{class:"ml-auto",onClick:t[0]||(t[0]=m=>n("close"))},"x")]),k(o.$slots,"default")])],32)):V("",!0)}}),{launchSnackbar:M}=$();function A(){const e={title:"",subtitle:"",content:"",external_content_url:"",publishing_state:"pbsh",maturing_state:"fnsh",image_url:"",resource_type:"",comment:""};return{interaction_progress:0,interaction_date:new Date(Date.now()),interaction_comment:"",interaction_is_public:!0,resource:e}}function c(e){return console.log("Date : ",e.interaction_date),e.interaction_date=new Date(e.interaction_date),e}async function F(){return(await i.get("/thought_inputs?limit=60")).data.map(n=>c(n))}async function T(e){const n=await i.get("/thought_inputs/"+e);return c(n.data)}async function H(e){return(await i.get("/users/"+e+"/thought_inputs?limit=60")).data.map(a=>c(a))}async function K(e){const n=new Date(e.interaction_date);console.log("Date : ",n);const a=n.toISOString().split(".")[0];e.interaction_progress=Number(e.interaction_progress);const s=await i.post("/thought_inputs",{...e,interaction_date:a});return M("Creation de l'input réussie","success"),c(s.data)}function G(){return{getUserThoughtInputs:H,newThoughtInput:A,createThoughtInput:K,getThoughtInputs:F,getThoughtInput:T}}export{j as _,z as a,R as b,O as r,G as u};
