import{_ as q,u as N}from"./TextInterface.vue_vue_type_script_setup_true_lang-b5b2d9b8.js";import{o as l,c as n,a,i as U,r as u,j,k as z,l as D,m as E,n as L,t as y,e as k,w as b,d as r,f as P,p as R,q as A,s as S,v as T,_ as w,g as H,x as F,u as O}from"./index-a15ca530.js";import{_ as G}from"./ArticleForm.vue_vue_type_script_setup_true_lang-92229767.js";import"./TextInput.vue_vue_type_script_setup_true_lang-e9b25367.js";function I(d,i){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})])}const J={key:0,class:"px-8 mx-auto"},K={key:0},Q={class:"my-8"},W=["src"],X={class:"text-3xl my-3 font-mplus md:text-center text-left"},Y={class:"md:text-center text-left"},Z={class:"md:flex my-8"},ee=["href"],te={key:1},se={class:"flex flex-row-reverse"},ae={key:1,class:"p-2 border rounded bg-neutral-100"},oe=a("hr",{class:"border-top border-zinc-400 my-4"},null,-1),ue=U({__name:"SeeArticle",props:{id:{}},setup(d){const i=d,{getArticle:C,updateArticle:m}=H(),v=u(null),e=u(null),_=j(),$=z();D(()=>_.query.editing,t=>{console.log("Editing : ",t),c.value=t==="false"?!1:!!t});const c=u(!1),f=t=>{$.push({query:{editing:t}})},B=()=>{e.value.publishing_state="pbsh",m(e.value.id,e.value)},p=(t,s)=>{clearTimeout(v.value),v.value=setTimeout(async()=>{try{await m(t,s)}catch(o){console.log("An error : ",o)}},2e3)},M=t=>{t!=`
`&&p(F(i).id.value,{...e.value,content:t})},{user:x}=O(),g=E(()=>x.value?e.value.author_id==x.value.id:!1),{getCommentsForArticle:V}=N(),h=u([]);return L(async()=>{e.value=await C(i.id),h.value=await V(i.id);const t=_.query.editing;c.value=t==="false"?!1:!!t}),(t,s)=>e.value?(l(),n("div",J,[c.value?(l(),n("div",te,[r(G,{article:e.value,onChange:s[1]||(s[1]=o=>p(e.value.id,o))},null,8,["article"]),a("div",se,[r(w,{class:"mx-4",onClick:s[2]||(s[2]=o=>f(!1)),type:"valid",text:"Preview"},{default:b(()=>[T("Ok")]),_:1}),e.value.publishing_state=="drft"?(l(),k(w,{key:0,onClick:B,type:"valid",text:"Publier"})):(l(),n("div",ae,"PubliÃ©"))])])):(l(),n("div",K,[a("div",Q,[a("img",{src:e.value.image_url,class:"border border-slate-300 dark:border-zinc-700 rounded-xl ml-auto mr-auto"},null,8,W)]),a("h1",X,y(e.value.title),1),a("div",Y,y(e.value.description),1),g.value?(l(),k(R,{key:0,onClick:s[0]||(s[0]=o=>f(!0))},{default:b(()=>[r(P(I),{class:"m-1"})]),_:1})):A("",!0),a("div",Z,[r(S,{"progress-value":e.value.progress,class:"w-1/3"},null,8,["progress-value"]),a("a",{class:"ml-auto underline",href:e.value.gdoc_url}," Ajouter un commentaire ",8,ee)])])),oe,r(q,{"ext-comments":h.value,"ressource-id":e.value.id,"full-text":e.value.content,editable:g.value,onChange:s[3]||(s[3]=o=>M(o))},null,8,["ext-comments","ressource-id","full-text","editable"])])):A("",!0)}});export{ue as default};
