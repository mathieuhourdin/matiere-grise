import{_ as f}from"./FeedList.vue_vue_type_script_setup_true_lang-f35ef9b4.js";import{d as c,r as w,o as r,c as _,w as v,a,t as x,b as p,e as d,f as l,F as h,g as y,h as g,i as m,u as k}from"./index-7fabcc4a.js";import{u as F}from"./useProblem-aa282939.js";import{u as $}from"./useInteraction-16d9cb83.js";import"./useResourceRelations-8a30c479.js";const B={class:"w-10 mx-auto"},P=["src"],C={class:"text-center overflow-hidden mt-1 text-xs",style:{display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"3"}},I=c({__name:"FollowedProblem",props:{problem:{}},setup(u){return(t,s)=>{const o=w("router-link");return r(),_(o,{to:"/resources/"+t.problem.id+"/feed",class:"m-1"},{default:v(()=>[a("div",B,[a("img",{src:t.problem.image_url,class:"border-2 border-zinc-400 rounded-full max-w-full aspect-[2/2] object-cover object-center w-full"},null,8,P)]),a("div",C,x(t.problem.title),1)]),_:1},8,["to"])}}}),M={class:"flex"},V=c({__name:"FollowedProblemsList",setup(u){const{getProblems:t}=F(),s=p([]);return d(async()=>{s.value=await t()}),(o,i)=>(r(),l("div",M,[(r(!0),l(h,null,y(s.value,n=>(r(),_(I,{problem:n,class:"shrink-0 grow-0 w-16"},null,8,["problem"]))),256))]))}}),j={class:"mt-1"},E=c({__name:"FeedView",setup(u){const{getReadAndWriteInteractions:t}=$(),{feedFilter:s}=k(),o=p([]),i=g(()=>o.value.map(e=>({resource:e.resource,date:e.interaction_date,user_id:e.interaction_user_id,context_comment:e.interaction_comment,progress:e.interaction_progress,...e})).sort((e,L)=>.5-Math.random()).filter(e=>s.value==="production"?e.interaction_type==="outp"&&!e.resource.is_external&&e.resource.resource_type!=="pblm":s.value==="problem"?e.resource.resource_type==="pblm":s.value==="biblio"?e.interaction_type==="inpt":!0)),n=async()=>o.value=await t();return d(async()=>{await n()}),(b,e)=>(r(),l("div",j,[m(V,{class:"overflow-scroll mb-2 md:mx-8",style:{"scrollbar-width":"none","-ms-overflow-style":"none"}}),m(f,{"interactions-list":i.value,class:"md:w-96 mx-auto"},null,8,["interactions-list"])]))}});export{E as default};
