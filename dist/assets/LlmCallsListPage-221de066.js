import{d as x,r as d,o as b,c as l,l as n,J as k,a2 as D,t as w,F as C,g as L,k as F,b as o,h as S}from"./index-7b431e64.js";import{u as M}from"./useLlmCall-1d8a8954.js";import{_ as T}from"./LlmCallCard.vue_vue_type_script_setup_true_lang-06823d7f.js";const $={class:"p-4"},z={class:"flex flex-wrap items-center gap-4 mb-6"},B=n("h1",{class:"text-2xl font-bold"},"LLM Calls",-1),N={class:"flex flex-wrap items-center gap-3 ml-auto"},V={class:"flex items-center gap-2"},E=n("label",{for:"datetime-filter",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," From: ",-1),J=["disabled"],R={key:0},H={key:1},I={key:0,class:"text-center text-2xl pt-10"},O={key:1,class:"space-y-4"},P={key:0,class:"text-center text-gray-500 py-8"},A=x({__name:"LlmCallsListPage",setup(U){const{getLlmCalls:g}=M(),c=d([]),u=d(!0),s=d(""),i=d(""),p=()=>{if(!s.value)return[];const t=new Date(s.value);return c.value.filter(e=>new Date(e.created_at)>=t)},_=t=>{if(!t)return"";const e=new Date(t),a=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0"),v=String(e.getHours()).padStart(2,"0"),h=String(e.getMinutes()).padStart(2,"0");return`${a}-${r}-${m}T${v}:${h}`},y=()=>{if(c.value.length===0)return;const t=c.value.reduce((e,a)=>{const r=new Date(e.created_at);return new Date(a.created_at)>r?a:e});s.value=_(t.created_at)},f=async()=>{const t=p();if(!(!s.value||t.length===0))try{const e=t.map(r=>({id:r.id,model:r.model,created_at:r.created_at,prompt:r.prompt,schema:r.schema,output:r.output})),a=JSON.stringify(e,null,2);await navigator.clipboard.writeText(a),i.value=`Copied ${t.length} call(s)!`,setTimeout(()=>{i.value=""},2e3)}catch(e){console.error("Failed to copy:",e),i.value="Copy failed",setTimeout(()=>{i.value=""},2e3)}};return b(async()=>{try{u.value=!0,c.value=await g(),y()}catch(t){console.error("Error loading LLM calls:",t)}finally{u.value=!1}}),(t,e)=>(o(),l("div",$,[n("div",z,[B,n("div",N,[n("div",V,[E,k(n("input",{id:"datetime-filter","onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),type:"datetime-local",class:"px-3 py-1.5 text-sm border border-slate-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-gray-100"},null,512),[[D,s.value]])]),n("button",{type:"button",onClick:f,disabled:!s.value||p().length===0,class:"inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium rounded-lg border border-slate-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[i.value?(o(),l("span",R,w(i.value),1)):(o(),l("span",H,"Copy filtered data"))],8,J)])]),u.value?(o(),l("div",I,"Loading...")):(o(),l("div",O,[(o(!0),l(C,null,L(c.value,a=>(o(),S(T,{key:a.id,"llm-call":a},null,8,["llm-call"]))),128)),c.value.length===0?(o(),l("div",P," No LLM calls found ")):F("",!0)]))]))}});export{A as default};
