import{_ as d}from"./TextInterface.vue_vue_type_script_setup_true_lang-520032b9.js";import{d as m,r as g,n as f,j as x,c as h,f as n,t as u,a as v,h as l,x as b,e as I,o as p,A as c}from"./index-d88080e2.js";const y=["src"],w={class:"text-3xl my-3 font-mplus md:text-center text-left"},D={class:"text-center"},T={class:"md:text-center text-left"},k={key:0},B={class:"md:flex my-8"},N=["href"],S=n("hr",{class:"border-top border-zinc-400 my-4"},null,-1),U=n("div",{class:"text-xs"},"Description de l'oeuvre",-1),z=n("hr",{class:"border-top border-zinc-400 my-4"},null,-1),A=n("div",{class:"text-xs"},"Pourquoi la lire",-1),P=m({__name:"SeeThoughtInput",props:{thoughtInput:{}},setup(t){const e=t,{getUserById:o,user:r}=I(),a=g(null),_=f(()=>r.value?e.thoughtInput.interaction_user_id===r.value.id:!1);return x(async()=>{e.thoughtInput.interaction_user_id&&(a.value=await o(e.thoughtInput.interaction_user_id))}),(s,E)=>(p(),h("div",null,[n("div",null,[n("img",{src:s.thoughtInput.resource_image_url,class:"border border-slate-300 dark:border-zinc-700 rounded-xl ml-auto mr-auto",style:{"max-height":"10rem"}},null,8,y)]),n("h1",w,u(s.thoughtInput.resource_title),1),n("div",D,[n("span",T,u(s.thoughtInput.resource_author_name),1),a.value?(p(),h("span",k," lu par "+u(a.value.first_name)+" "+u(a.value.last_name),1)):v("",!0)]),n("div",B,[l(b,{"progress-value":s.thoughtInput.interaction_progress,class:"m-2 w-1/3"},null,8,["progress-value"]),n("a",{class:"ml-auto underline",href:s.thoughtInput.resource_external_content_url}," ressource externe",8,N)]),S,U,l(d,{class:"border text-sm","full-text":s.thoughtInput.resource_comment,editable:_.value},null,8,["full-text","editable"]),z,A,l(d,{class:"border text-sm","full-text":s.thoughtInput.interaction_comment,editable:_.value},null,8,["full-text","editable"])]))}});function V(){return{resource_title:"",resource_author_name:"",resource_type:"",resource_external_content_url:"",resource_image_url:"",resource_comment:"",interaction_progress:0,interaction_date:new Date(Date.now()),interaction_comment:"",interaction_is_public:!0}}function i(t){return console.log("Date : ",t.interaction_date),t.interaction_date=new Date(t.interaction_date),t}async function C(){return(await c.get("/thought_inputs")).data.map(e=>i(e))}async function $(t){const e=await c.get("/thought_inputs/"+t);return i(e.data)}async function j(t){return(await c.get("/users/"+t+"/thought_inputs")).data.map(o=>i(o))}async function q(t){const e=new Date(t.interaction_date);console.log("Date : ",e);const o=e.toISOString().split(".")[0];t.interaction_progress=Number(t.interaction_progress);const r=await c.post("/thought_inputs",{...t,interaction_date:o});return i(r.data)}function R(){return{getUserThoughtInputs:j,newThoughtInput:V,createThoughtInput:q,getThoughtInputs:C,getThoughtInput:$}}export{P as _,R as u};
