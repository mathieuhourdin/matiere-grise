import{a as B}from"./useArticle-a094c582.js";import{_ as p}from"./TextInput.vue_vue_type_script_setup_true_lang-5e5d1aea.js";import{d as I,r as h,b as N,c as E,u as T}from"./ResourceComponent.vue_vue_type_script_setup_true_lang-3ab76993.js";import{_ as j}from"./ActionButton.vue_vue_type_script_setup_true_lang-1ec04a65.js";import{d as g,u as D,p as b,r as v,o as y,w as P,c as i,e as o,t as c,g as $,h as k,j as f,f as t,m as w,b as r,k as x}from"./index-4f9567ef.js";import{_ as R}from"./CreateThoughtInput.vue_vue_type_script_setup_true_lang-8d2416b3.js";import"./TextInterface.vue_vue_type_script_setup_true_lang-dd9fbacd.js";import"./ProgressBar.vue_vue_type_script_setup_true_lang-06e96c8b.js";import"./useResource-89ed9147.js";import"./useProblem-691a3d5d.js";const q={class:"text-center p-4 bg-slate-200"},A={key:0},F=["src"],H={class:"text-2xl bold"},M={class:"mt-4"},S={key:1},z={class:"flex mx-auto"},G={key:0,class:"flex"},J={class:"flex flex-row-reverse"},K=g({__name:"UserInfos",props:{user:{}},setup(V){const u=V,{user:d,debouncedUpdateUser:U}=w(),_=D(),m=b(()=>!u.user.is_platform_user||u.user.id===d.value.id),n=v(!1),s=v(null);return y(()=>{s.value=u.user,n.value=_.query.editingUser}),P(s,a=>U(a.id,a),{deep:!0}),(a,e)=>(r(),i("div",q,[n.value?(r(),i("div",S,[t(p,{class:"mx-auto w-2/3",modelValue:s.value.profile_picture_url,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.profile_picture_url=l),label:"Photo de profil"},null,8,["modelValue"]),o("div",z,[t(p,{class:"ml-auto",modelValue:s.value.first_name,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.first_name=l),label:"Prénom"},null,8,["modelValue"]),t(p,{class:"mr-auto",modelValue:s.value.last_name,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.last_name=l),label:"Nom"},null,8,["modelValue"])]),s.value.is_platform_user?(r(),i("div",G,[t(p,{class:"ml-auto",modelValue:s.value.handle,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.handle=l),label:"Handle"},null,8,["modelValue"]),t(p,{class:"mr-auto",modelValue:s.value.email,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.email=l),label:"Email"},null,8,["modelValue"])])):f("",!0),o("div",null,[t(I,{modelValue:s.value.biography,"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.biography=l),label:"Bio"},null,8,["modelValue"])]),o("div",J,[t(j,{onClick:e[7]||(e[7]=l=>n.value=!1),text:"Valider",type:"valid"})])])):(r(),i("div",A,[o("img",{src:a.user.profile_picture_url,class:"mx-auto m-4 w-1/6"},null,8,F),o("div",H,c(a.user.first_name)+" "+c(a.user.last_name),1),o("div",null,c(a.user.handle),1),o("div",null,c(a.user.email),1),o("div",M,c(a.user.biography),1),m.value?(r(),$(B,{key:0,class:"right-4 absolute",onClick:e[0]||(e[0]=l=>n.value=!0)},{default:k(()=>[t(x(h),{class:"m-1"})]),_:1})):f("",!0)]))]))}}),L={class:"m-8"},O=o("div",{class:"text-center m-4 italic text-sm"},"Derniers apports extérieurs",-1),oe=g({__name:"UserFeedView",props:{pageUserId:{}},setup(V){const u=V,d=v(!1),{getUserById:U,user:_}=w(),m=v(null),{getUserThoughtInputs:n}=T(),s=v([]),a=b(()=>s.value.map(e=>({resource:e.resource,date:e.interaction_date,user_id:e.interaction_user_id,context_comment:e.interaction_comment,progress:e.interaction_progress})));return y(async()=>{m.value=await U(u.pageUserId),s.value=await n(u.pageUserId)}),(e,l)=>(r(),i("div",null,[o("div",L,[m.value?(r(),$(K,{key:0,class:"mx-auto border my-8",user:m.value},null,8,["user"])):f("",!0),O,x(_)&&e.pageUserId==x(_).id?(r(),i("div",{key:1,class:"italic underline text-xs",onClick:l[0]||(l[0]=C=>d.value=!0)}," Ajouter un nouvel apport ")):f("",!0),t(N,{open:d.value},{default:k(()=>[t(R,{onClose:l[1]||(l[1]=C=>d.value=!1)})]),_:1},8,["open"]),t(E,{class:"mx-auto","contextual-resources":a.value},null,8,["contextual-resources"])])]))}});export{oe as default};
