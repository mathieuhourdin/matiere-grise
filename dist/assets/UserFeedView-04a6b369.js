import{_ as C}from"./FeedList.vue_vue_type_script_setup_true_lang-c23fbdc6.js";import{_ as h}from"./RoundLinkButton.vue_vue_type_style_index_0_lang-b5019ced.js";import{_ as p}from"./TextInput.vue_vue_type_script_setup_true_lang-452c144c.js";import{a as B,r as N,_ as E}from"./useThoughtInputs-260d1c51.js";import{_ as j}from"./ActionButton.vue_vue_type_script_setup_true_lang-1a6f154e.js";import{d as b,u as A,h as y,b as _,e as x,j as P,f as i,a as o,t as v,c as $,w as k,m as f,i as t,p as w,o as r,n as g}from"./index-456102ed.js";import{_ as R}from"./CreateThoughtInput.vue_vue_type_script_setup_true_lang-002e7bdb.js";import{u as q}from"./useInteraction-c860e408.js";/* empty css                                                               */import"./useResourceRelations-9056c5c2.js";const D={class:"text-center p-4 bg-slate-200"},F={key:0},H=["src"],M={class:"text-2xl bold"},S={class:"mt-4"},T={key:1},W={class:"flex mx-auto"},z={key:0,class:"flex"},G={class:"flex flex-row-reverse"},J=b({__name:"UserInfos",props:{user:{}},setup(V){const u=V,{user:d,debouncedUpdateUser:U}=w(),c=A(),m=y(()=>!u.user.is_platform_user||u.user.id===d.value.id),n=_(!1),l=_(null);return x(()=>{l.value=u.user,n.value=c.query.editingUser}),P(l,a=>U(a.id,a),{deep:!0}),(a,e)=>(r(),i("div",D,[n.value?(r(),i("div",T,[t(p,{class:"mx-auto w-2/3",modelValue:l.value.profile_picture_url,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.profile_picture_url=s),label:"Photo de profil"},null,8,["modelValue"]),o("div",W,[t(p,{class:"ml-auto",modelValue:l.value.first_name,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.first_name=s),label:"PrÃ©nom"},null,8,["modelValue"]),t(p,{class:"mr-auto",modelValue:l.value.last_name,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.last_name=s),label:"Nom"},null,8,["modelValue"])]),l.value.is_platform_user?(r(),i("div",z,[t(p,{class:"ml-auto",modelValue:l.value.handle,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.handle=s),label:"Handle"},null,8,["modelValue"]),t(p,{class:"mr-auto",modelValue:l.value.email,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.email=s),label:"Email"},null,8,["modelValue"])])):f("",!0),o("div",null,[t(B,{modelValue:l.value.biography,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.biography=s),label:"Bio"},null,8,["modelValue"])]),o("div",G,[t(j,{onClick:e[7]||(e[7]=s=>n.value=!1),text:"Valider",type:"valid"})])])):(r(),i("div",F,[o("img",{src:a.user.profile_picture_url,class:"mx-auto m-4 w-1/6"},null,8,H),o("div",M,v(a.user.first_name)+" "+v(a.user.last_name),1),o("div",null,v(a.user.handle),1),o("div",null,v(a.user.email),1),o("div",S,v(a.user.biography),1),m.value?(r(),$(h,{key:0,class:"right-4 absolute",onClick:e[0]||(e[0]=s=>n.value=!0)},{default:k(()=>[t(g(N),{class:"m-1"})]),_:1})):f("",!0)]))]))}}),K={class:"m-8"},te=b({__name:"UserFeedView",props:{pageUserId:{}},setup(V){const u=V,d=_(!1),{getUserById:U,user:c}=w(),m=_(null),{getUserReadAndWriteInteractions:n}=q(),l=_([]),a=y(()=>l.value.map(e=>({resource:e.resource,date:e.interaction_date,user_id:e.interaction_user_id,context_comment:e.interaction_comment,progress:e.interaction_progress,...e})).sort((e,s)=>s.date-e.date));return x(async()=>{m.value=await U(u.pageUserId),l.value=await n(u.pageUserId)}),(e,s)=>(r(),i("div",null,[o("div",K,[m.value?(r(),$(J,{key:0,class:"mx-auto border my-8",user:m.value},null,8,["user"])):f("",!0),g(c)&&e.pageUserId==g(c).id?(r(),i("div",{key:1,class:"italic underline text-xs mb-4",onClick:s[0]||(s[0]=I=>d.value=!0)}," Ajouter un nouvel apport ")):f("",!0),t(E,{open:d.value},{default:k(()=>[t(R,{onClose:s[1]||(s[1]=I=>d.value=!1)})]),_:1},8,["open"]),t(C,{"interactions-list":a.value},null,8,["interactions-list"])])]))}});export{te as default};
