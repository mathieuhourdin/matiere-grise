import{d as k,u as w,r as v,o as P,y as S,c as u,m as z,l as t,e as s,w as g,z as y,b as d,f as V,t as C,S as E,U as j,L as N,H as B}from"./index-67386673.js";import{_ as r}from"./TextInput.vue_vue_type_script_setup_true_lang-404454f8.js";import{_ as I}from"./TextAreaInput.vue_vue_type_script_setup_true_lang-73dfd9bb.js";import{_ as $}from"./CheckboxInput.vue_vue_type_script_setup_true_lang-fc6b77e0.js";const _=n=>(E("data-v-c3ef963e"),n=n(),j(),n),F={class:"min-h-screen text-slate-100 p-2 md:p-10 md:w-11/12 mx-auto"},H=_(()=>t("h1",{class:"text-2xl font-bold mb-4"},"Mon profil",-1)),L={key:0,class:"text-center p-8"},M=_(()=>t("p",null,"Chargement...",-1)),q=[M],A={key:1,class:"max-w-2xl"},D={class:"mb-6 text-center"},R=["src"],T={key:1,class:"mx-auto w-32 h-32 rounded-full bg-gray-300 dark:bg-gray-700 flex items-center justify-center"},W=_(()=>t("span",{class:"text-gray-500 dark:text-gray-400 text-4xl"},"ðŸ‘¤",-1)),G=[W],J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},K={class:"col-span-2"},O={class:"col-span-2"},Q={class:"mt-6 flex flex-row-reverse gap-4"},X=k({__name:"UserPage",setup(n){const{user:o,updateUser:b,loadUser:f}=w(),{launchSnackbar:p}=N(),e=v({email:"",first_name:"",last_name:"",handle:"",pseudonym:"",pseudonymized:!1,profile_picture_url:"",biography:""}),i=v(null),m=v(!1);P(async()=>{o.value||await f(),o.value&&h()}),S(()=>o.value,()=>{o.value&&h()},{deep:!0});function h(){o.value&&(e.value={...o.value,biography:o.value.biography||""},i.value={...o.value,biography:o.value.biography||""})}function x(){i.value&&(e.value={...i.value})}async function U(){var c;if(!m.value){if(!((c=o.value)!=null&&c.id)){p("Utilisateur non trouvÃ©","error");return}m.value=!0;try{e.value.handle&&!e.value.handle.startsWith("@")&&(e.value.handle="@"+e.value.handle);const l=await b(o.value.id,e.value);i.value={...e.value},await f(),p("Profil mis Ã  jour avec succÃ¨s","success")}catch(l){console.error("Error updating user:",l),p("Erreur lors de la mise Ã  jour du profil","error")}finally{m.value=!1}}}return(c,l)=>(d(),u("div",F,[H,z(o)?(d(),u("div",A,[t("div",D,[e.value.profile_picture_url?(d(),u("img",{key:0,src:e.value.profile_picture_url,alt:"Profile picture",class:"mx-auto w-32 h-32 rounded-full object-cover border-2 border-gray-400 dark:border-gray-600"},null,8,R)):(d(),u("div",T,G))]),t("div",J,[s(r,{class:"col-span-2",label:"Photo de profil (URL)",modelValue:e.value.profile_picture_url,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.profile_picture_url=a),placeholder:"https://example.com/image.jpg"},null,8,["modelValue"]),s(r,{label:"PrÃ©nom",modelValue:e.value.first_name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.first_name=a),placeholder:"Votre prÃ©nom"},null,8,["modelValue"]),s(r,{label:"Nom",modelValue:e.value.last_name,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.last_name=a),placeholder:"Votre nom"},null,8,["modelValue"]),s(r,{label:"Pseudo",modelValue:e.value.pseudonym,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.pseudonym=a),placeholder:"Votre pseudo"},null,8,["modelValue"]),t("div",K,[s($,{modelValue:e.value.pseudonymized,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.pseudonymized=a),label:"Ne montrer que votre pseudo"},null,8,["modelValue"])]),s(r,{label:"Email",modelValue:e.value.email,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.email=a),type:"email",placeholder:"votre@email.com",autocomplete:"email"},null,8,["modelValue"]),s(r,{label:"Handle",modelValue:e.value.handle,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.handle=a),placeholder:"@votre_handle"},null,8,["modelValue"]),t("div",O,[s(I,{modelValue:e.value.biography,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.biography=a),label:"Biographie",placeholder:"Parlez-nous de vous...",class:"h-80"},null,8,["modelValue"])])]),t("div",Q,[s(y,{onClick:U,type:"valid"},{default:g(()=>[V(C(m.value?"Enregistrement...":"Enregistrer"),1)]),_:1}),s(y,{onClick:x,type:"abort"},{default:g(()=>[V(" Annuler ")]),_:1})])])):(d(),u("div",L,q))]))}});const ae=B(X,[["__scopeId","data-v-c3ef963e"]]);export{ae as default};
