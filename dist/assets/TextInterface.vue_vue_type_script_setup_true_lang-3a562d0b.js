import{e as E,g as F,r as i,h as T,m as p,l as P,o as r,c as a,F as g,n as m,p as W,b as A,t as z}from"./index-a50c0045.js";const D=["onClick"],I={key:0,style:{width:"5px"}},K={key:1,style:{height:"25px"}},L={key:2},N=E({__name:"TextInterface",props:{fullText:{}},emits:["change"],setup(x,{emit:_}){const c=x,u=l=>{if(console.log("textArrayFromString textString: ",l),t.value=[],l===void 0||l==""){t.value=[{id:0,char:`
`}],d(null,{id:0,char:`
`});return}for(var e=0;e<l.length;e++)t.value.push({id:e,char:l[e]})},y=F(()=>{console.log("Compute lines");let l=[{id:0,text:[]}].concat(t.value.filter(e=>e.char==`
`));console.log("Compute ids.length : ",l.length);for(let e=0;e<l.length-1;e++)console.log("Compute line : ",e),l[e].text=t.value.filter(n=>n.id>=l[e].id&&n.id<l[e+1].id);return l[l.length-1].text=t.value.filter(e=>e.id>=l[l.length-1].id),l}),t=i([]),d=(l,e)=>{console.log("selectCursorPosition letter : ",e),o.value={id:e.id,line:e.line,char:e.char}},o=i(null),h=l=>{t.value.filter(e=>e.id>=o.value.id+1).forEach(e=>e.id+=1),t.value.splice(o.value.id+1,0,{id:o.value.id+1,char:l,line:0}),o.value.id+=1},k=l=>{if(console.log("Writes : ",l.key),o.value===null)return;const e=l.key;e.length==1?h(e):e=="Backspace"?(t.value.splice(o.value.id,1),t.value.filter(n=>n.id>o.value.id).forEach(n=>n.id-=1),o.value.id-=1):e=="Enter"&&h(`
`)},C=l=>l.reduce((e,n)=>e+n.char,""),v=i(!1);return T(()=>{u(c.fullText),v.value=!0}),p(t,l=>{console.log("Watch triggered : ",l),v.value&&_("change",C(l))},{deep:!0}),p(P(c).fullText,l=>{u(l)}),(l,e)=>(r(),a("div",{class:"border-2 mx-auto relative p-4",tabindex:"0",onKeydown:k},[(r(!0),a(g,null,m(y.value,(n,b)=>(r(),a("div",{key:b,class:"flex flex-wrap w-full"},[(r(!0),a(g,null,m(n.text,(s,w)=>{var f;return r(),a("div",{key:w,class:W(["border-blue-400",{"border-r-2":s.id==((f=o.value)==null?void 0:f.id)}]),onClick:B=>d(B,s)},[s.char==" "?(r(),a("div",I)):s.char==`
`?(r(),a("div",K)):(r(),a("div",L,[A("div",null,z(s.char),1)]))],10,D)}),128))]))),128))],32))}});export{N as _};
