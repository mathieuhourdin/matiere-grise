import{C as D,d as g,r as f,l as v,x as L,o as n,c as u,h as y,w as T,f as t,t as m,m as P,F as w,p as C,q as $,a as A,s as F,i as N}from"./index-b8ad1093.js";import{a as q,u as B}from"./useThoughtOutput-cf8e5f18.js";const{createThoughtOutput:I}=q(),R=()=>({title:"",description:"",content:"",publishing_state:"drft",image_url:"",output_type:"pblm",progress:0,potential_improvements:"",maturing_state:""}),V=o=>o,O=async()=>(await D.get("/problems")).data.map(r=>V(r));function x(){return{newProblem:R,getProblems:O,createProblem:I}}const j={class:"border shadow-xl rounded m-2 p-4 h-72 w-60"},S={class:"max-h-full"},U=["src"],W={class:"h-full"},E={class:"mb-2"},M={class:"text-2xs italic",style:{"margin-top":"-8px"}},z={class:"text-2xs mb-auto"},G={class:"flex mt-2"},H={class:"text-2xs italic mt-auto"},J={class:"ml-auto text-2xs underline"},K=g({__name:"ProblemCard",props:{problem:{}},setup(o){const r=o,d=e=>new Date(e.split(".")[0]).toLocaleString("fr-FR",{hour:"numeric",weekday:"short",day:"numeric",month:"short",year:"2-digit"}),p=e=>e.length>200?e.slice(0,150)+"...":e,i=f([]),{getThoughtInputUsagesForThoughtOutput:a}=B(),h=async()=>{i.value=await a(r.problem.id)};return v(()=>h()),(e,c)=>{const _=L("router-link");return n(),u("div",j,[y(_,{to:"/thought_outputs/"+e.problem.id},{default:T(()=>[t("div",S,[t("img",{class:"h-28 mx-auto mb-4",src:e.problem.image_url},null,8,U),t("div",W,[t("div",E,m(e.problem.title),1),t("div",M,m(e.problem.owner_id),1),t("div",z,m(p(e.problem.description)),1),t("div",G,[t("div",H,m(d(e.problem.created_at)),1),t("div",J,m(i.value.length)+" inputs",1)])])])]),_:1},8,["to"])])}}}),Q={class:"flex"},X=t("hr",{class:"border-top border-slate-800 border-dashed my-1"},null,-1),Y={class:"flex overflow-scroll"},Z=g({__name:"CategoryProblemsCarousel",props:{problemsList:{},category:{}},setup(o){const r=o,{newProblem:d,createProblem:p}=x(),i=P(),a=async()=>{const e=d();e.category_id=r.category.id;const c=await p(e);i.push({path:"/thought_outputs/"+c.id,query:{editing:!0}})},h=e=>e=="default"?"Autres":e;return(e,c)=>(n(),u("div",null,[t("div",Q,[t("div",null,m(h(e.category.display_name)),1),t("div",{onClick:a,class:"ml-auto text-sm mr-2 underline"},"Ajouter")]),X,t("div",Y,[(n(!0),u(w,null,C(e.problemsList,(_,l)=>(n(),u("div",{class:"mb-4",key:l},[y(K,{problem:_},null,8,["problem"])]))),128))])]))}}),ee={key:0,class:"m-4"},oe=g({__name:"ProblemsView",setup(o){const r=P(),{getProblems:d,newProblem:p,createProblem:i}=x(),a=f(null),{categories:h}=F(),e=async()=>{const l=p(),s=await i(l);r.push({path:"/thought_outputs/"+s.id,query:{editing:!0}})},c=$(()=>h.value.map(s=>(s.problems=_(s),s.problemsLenght=s.problems.length,s))),_=l=>l.display_name=="default"?a.value.filter(s=>s.category_id==null):a.value.filter(s=>s.category_id==l.id);return v(async()=>a.value=await d()),(l,s)=>(n(),u("div",null,[a.value?(n(),u("div",ee,[t("div",{class:"underline italic",onClick:e}," Ajouter une problÃ©matique "),(n(!0),u(w,null,C(c.value.sort((b,k)=>k.problemsLenght-b.problemsLenght),b=>(n(),N(Z,{class:"mt-4",category:b,key:b.id,"problems-list":b.problems},null,8,["category","problems-list"]))),128))])):A("",!0)]))}});export{oe as default};
