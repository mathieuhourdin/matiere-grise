import{C,d as b,r as g,l as f,x as k,o as l,c as m,h as v,w as D,f as e,t as c,m as y,F as P,p as w,u as T,s as $,i as A}from"./index-ec36c20e.js";import{a as F,u as B}from"./useThoughtOutput-c04d41fe.js";const{createThoughtOutput:I}=F(),L=()=>({title:"",description:"",content:"",publishing_state:"drft",image_url:"",output_type:"pblm",progress:0,potential_improvements:"",maturing_state:""}),N=s=>s,R=async()=>(await C.get("/problems")).data.map(r=>N(r));function x(){return{newProblem:L,getProblems:R,createProblem:I}}const q={class:"border shadow-xl rounded m-2 p-4 h-72 w-60"},O={class:"max-h-full"},V=["src"],j={class:"h-full"},S={class:"mb-2"},U={class:"text-2xs italic",style:{"margin-top":"-8px"}},E={class:"text-2xs mb-auto"},M={class:"flex mt-2"},W={class:"text-2xs italic mt-auto"},z={class:"ml-auto text-2xs underline"},G=b({__name:"ProblemCard",props:{problem:{}},setup(s){const r=s,d=t=>new Date(t.split(".")[0]).toLocaleString("fr-FR",{hour:"numeric",weekday:"short",day:"numeric",month:"short",year:"2-digit"}),p=t=>t.length>200?t.slice(0,150)+"...":t,i=g([]),{getThoughtInputUsagesForThoughtOutput:n}=B(),_=async()=>{i.value=await n(r.problem.id)};return f(()=>_()),(t,u)=>{const o=k("router-link");return l(),m("div",q,[v(o,{to:"/thought_outputs/"+t.problem.id},{default:D(()=>[e("div",O,[e("img",{class:"h-28 mx-auto mb-4",src:t.problem.image_url},null,8,V),e("div",j,[e("div",S,c(t.problem.title),1),e("div",U,c(t.problem.owner_id),1),e("div",E,c(p(t.problem.description)),1),e("div",M,[e("div",W,c(d(t.problem.created_at)),1),e("div",z,c(i.value.length)+" inputs",1)])])])]),_:1},8,["to"])])}}}),H={class:"flex"},J=e("hr",{class:"border-top border-slate-800 border-dashed my-1"},null,-1),K={class:"flex overflow-scroll"},Q=b({__name:"CategoryProblemsCarousel",props:{problemsList:{},category:{}},setup(s){const r=s,{newProblem:d,createProblem:p}=x(),i=y(),n=async()=>{const t=d();t.category_id=r.category.id;const u=await p(t);i.push({path:"/thought_outputs/"+u.id,query:{editing:!0}})},_=t=>t=="default"?"Autres":t;return(t,u)=>(l(),m("div",null,[e("div",H,[e("div",null,c(_(t.category.display_name)),1),e("div",{onClick:n,class:"ml-auto text-sm mr-2 underline"},"Ajouter")]),J,e("div",K,[(l(!0),m(P,null,w(t.problemsList,(o,a)=>(l(),m("div",{key:a},[v(G,{problem:o},null,8,["problem"])]))),128))])]))}}),X={class:"m-4"},tt=b({__name:"ProblemsView",setup(s){const r=y(),{getProblems:d,newProblem:p,createProblem:i}=x(),n=g([]),{categories:_}=$(),t=async()=>{const o=p(),a=await i(o);r.push({path:"/thought_outputs/"+a.id,query:{editing:!0}})},u=o=>o.display_name=="default"?n.value.filter(a=>a.category_id==null):n.value.filter(a=>a.category_id==o.id);return f(async()=>n.value=await d()),(o,a)=>(l(),m("div",null,[e("div",X,[e("div",{class:"underline italic",onClick:t}," Ajouter une problÃ©matique "),(l(!0),m(P,null,w(T(_),h=>(l(),A(Q,{class:"mt-4",category:h,key:h.id,"problems-list":u(h)},null,8,["category","problems-list"]))),128))])]))}});export{tt as default};
