import{b as s}from"./index-0d2f9f3b.js";const a=s([]),v=s(null),d=(e,l,t)=>e.slice(0,t)+l+e.slice(t),w=(e,l)=>e.slice(0,l-1)+e.slice(l),n=s(0),c=async e=>{if(e.value.startOffset!==0)a.value[e.value.line].text=w(a.value[e.value.line].text,e.value.startOffset),e.value.startOffset-=1;else{if(a.value[e.value.line].chip){a.value[e.value.line].chip=!1,n.value+=1;return}if(a.value[e.value.line].chip){a.value[e.value.line].chip=!1,n.value+=1;return}if(e.value.line===0)return;await new Promise(l=>setTimeout(l,10)),e.value={line:e.value.line-1,startOffset:a.value[e.value.line-1].text.length,endOffset:a.value[e.value.line-1].text.length},a.value[e.value.line].text+=a.value[e.value.line+1].text,a.value.splice(e.value.line+1,1)}n.value+=1},T=async(e,l)=>{if(v.value==="Dead")switch(e){case"e":e="ê";break;case"o":e="ô";break;case"a":e="â";break;case"u":e="û";break}e==="#"&&l.value.startOffset===0?a.value[l.value.line].bold=!0:e==="*"&&l.value.startOffset===0?a.value[l.value.line].chip=!0:(a.value[l.value.line].text=d(a.value[l.value.line].text,e,l.value.startOffset),await new Promise(t=>setTimeout(t,1)),l.value.startOffset+=1),n.value+=1},b=async e=>{const l=e.value.line,t=e.value.startOffset,f=a.value[e.value.line].text,u=f.slice(0,t),p={index:440,text:f.substring(t,f.length),bold:!1,chip:!1};a.value.splice(l+1,0,p),await new Promise(h=>setTimeout(h,10)),e.value={line:l+1,startOffset:0,endOffset:0},a.value[l].text=u,n.value+=1},O=s(""),x=e=>{const l=a.value[e.value.line].text.slice(e.value.startOffset,e.value.endOffset);O.value=l,console.log("CopiedText : ",l)},m=e=>{x(e);const l=a.value[e.value.line].text,t=e.value.endOffset;e.value.endOffset=e.value.endOffset,a.value[e.value.line].text=l.slice(0,e.value.startOffset)+l.slice(t)},g=e=>{a.value[e.value.line].text=d(a.value[e.value.line].text,O.value,e.value.startOffset),e.value.startOffset+=O.value.length,e.value.endOffset=e.value.startOffset},C=async(e,l)=>{const t=e.key;if(e.preventDefault(),console.log("Keydown : ",t),t==="c"&&v.value==="Control"){x(l),v.value=t;return}if(t==="x"&&v.value==="Control"){m(l),v.value=t;return}if(t==="v"&&v.value==="Control"){g(l),v.value=t;return}t.length===1?await T(t,l):t==="Enter"?await b(l):t==="Backspace"?await c(l):t==="ArrowRight"?l.value.startOffset===a.value[l.value.line].text.length?l.value={line:l.value.line+1,startOffset:1,endOffset:1}:l.value.startOffset+=1:t==="ArrowLeft"&&(l.value.startOffset===0?l.value={line:l.value.line-1,startOffset:a.value[l.value.line-1].text.length,endOffset:a.value[l.value.line-1].text.length}:l.value.startOffset-=1),v.value=t},L=e=>e.split(`
`).map((l,t)=>{let f=!1,u=!1;return l[0]==="#"&&(l=l.slice(1),f=!0),l[0]==="*"&&(l=l.slice(1),u=!0),{index:t,text:l,bold:f,chip:u}}),_=()=>a.value.map(e=>(e.bold?"#":"")+(e.chip?"*":"")+e.text).join(`
`);function N(){return{textLines:a,keydown:C,editCount:n,parseTextLines:L,formatText:_}}export{N as u};
