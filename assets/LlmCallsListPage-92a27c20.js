import{d as M,x as T,r as p,o as z,c as o,l as r,D as C,M as $,t as i,F as N,g as R,k as l,b as n,f as V,p as B}from"./index-67386673.js";import{u as A}from"./useLlmCall-ace58758.js";const E={class:"p-4"},I={class:"flex flex-wrap items-center gap-4 mb-6"},K=r("h1",{class:"text-2xl font-bold"},"LLM Calls",-1),O={class:"flex flex-wrap items-center gap-3 ml-auto"},j={class:"flex items-center gap-2"},H=r("label",{for:"datetime-filter",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," From: ",-1),J=["disabled"],P={key:0},U={key:1},Y={key:0,class:"text-center text-2xl pt-10"},q={key:1,class:"space-y-4"},G=["href","onClick"],Q={class:"flex justify-between items-start"},W={class:"flex-1"},X={class:"font-semibold text-lg"},Z={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},tt={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},et={key:0,class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},st={class:"text-right text-sm text-gray-500"},rt={key:0},at={key:1},ot={key:2},nt={class:"mt-2 text-sm text-gray-700 dark:text-gray-300 line-clamp-2"},it={key:0,class:"text-center text-gray-500 py-8"},lt=M({__name:"LlmCallsListPage",setup(dt){const x=T(),{getLlmCalls:f}=A(),c=p([]),g=p(!0),d=p(""),u=p(""),_=()=>{if(!d.value)return[];const e=new Date(d.value);return c.value.filter(t=>new Date(t.created_at)>=e)},m=(e,t)=>{e.ctrlKey||e.metaKey||(e.preventDefault(),x.push({path:"/app/llm-calls/"+t}))},h=e=>{e.button!==1&&e.preventDefault()},v=e=>e?new Date(e).toLocaleString():"",k=(e,t)=>e?e.length<=t?e:e.substring(0,t)+"...":"",b=e=>{const t=e.toLowerCase();return t==="success"||t==="completed"?"text-green-600 dark:text-green-400":t==="error"||t==="failed"?"text-red-600 dark:text-red-400":t==="pending"||t==="processing"?"text-yellow-600 dark:text-yellow-400":"text-gray-600 dark:text-gray-400"},D=e=>{if(!e)return"";const t=new Date(e),s=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),y=String(t.getDate()).padStart(2,"0"),S=String(t.getHours()).padStart(2,"0"),F=String(t.getMinutes()).padStart(2,"0");return`${s}-${a}-${y}T${S}:${F}`},w=()=>{if(c.value.length===0)return;const e=c.value.reduce((t,s)=>{const a=new Date(t.created_at);return new Date(s.created_at)>a?s:t});d.value=D(e.created_at)},L=async()=>{const e=_();if(!(!d.value||e.length===0))try{const t=e.map(a=>({id:a.id,model:a.model,created_at:a.created_at,prompt:a.prompt,schema:a.schema,output:a.output})),s=JSON.stringify(t,null,2);await navigator.clipboard.writeText(s),u.value=`Copied ${e.length} call(s)!`,setTimeout(()=>{u.value=""},2e3)}catch(t){console.error("Failed to copy:",t),u.value="Copy failed",setTimeout(()=>{u.value=""},2e3)}};return z(async()=>{try{g.value=!0,c.value=await f(),w()}catch(e){console.error("Error loading LLM calls:",e)}finally{g.value=!1}}),(e,t)=>(n(),o("div",E,[r("div",I,[K,r("div",O,[r("div",j,[H,C(r("input",{id:"datetime-filter","onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),type:"datetime-local",class:"px-3 py-1.5 text-sm border border-slate-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-gray-100"},null,512),[[$,d.value]])]),r("button",{type:"button",onClick:L,disabled:!d.value||_().length===0,class:"inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium rounded-lg border border-slate-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(n(),o("span",P,i(u.value),1)):(n(),o("span",U,"Copy filtered data"))],8,J)])]),g.value?(n(),o("div",Y,"Loading...")):(n(),o("div",q,[(n(!0),o(N,null,R(c.value,s=>(n(),o("a",{key:s.id,href:`/app/llm-calls/${s.id}`,class:"block border border-slate-300 dark:border-zinc-700 rounded-lg p-4 cursor-pointer hover:bg-slate-50 dark:hover:bg-zinc-800 no-underline",onClick:a=>m(a,s.id),onAuxclick:t[1]||(t[1]=a=>h(a))},[r("div",Q,[r("div",W,[r("div",X,i(s.model),1),r("div",Z,[V(" Status: "),r("span",{class:B(b(s.status))},i(s.status),3)]),r("div",tt," Created: "+i(v(s.created_at)),1),s.price?(n(),o("div",et," Cost: "+i(s.price.toFixed(4))+" "+i(s.currency),1)):l("",!0)]),r("div",st,[s.input_tokens_used?(n(),o("div",rt," Input: "+i(s.input_tokens_used.toLocaleString()),1)):l("",!0),s.output_tokens_used?(n(),o("div",at," Output: "+i(s.output_tokens_used.toLocaleString()),1)):l("",!0),s.reasoning_tokens_used?(n(),o("div",ot," Reasoning: "+i(s.reasoning_tokens_used.toLocaleString()),1)):l("",!0)])]),r("div",nt,i(k(s.prompt,150)),1)],40,G))),128)),c.value.length===0?(n(),o("div",it," No LLM calls found ")):l("",!0)]))]))}});export{lt as default};
