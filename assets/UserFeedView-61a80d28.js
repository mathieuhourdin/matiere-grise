import{q as U,d as _,o as i,c as v,f as d,t as g,r as m,n as b,s as C,v as D,g as N,a as V,h as u,_ as h,i as x,u as w,w as y,A as T,y as B,e as S}from"./index-da616e41.js";import{_ as r}from"./TextInput.vue_vue_type_script_setup_true_lang-49bf763d.js";import{_ as A}from"./ThoughtInputsList.vue_vue_type_script_setup_true_lang-6c3017ca.js";function q(){return{resource_title:"",resource_author_name:"",resource_type:"",resource_link:"",resource_image_link:"",resource_comment:"",input_progress:0,input_date:new Date(Date.now()),input_comment:"",input_is_public:!0}}function $(l){return console.log("Date : ",l.input_date),l.input_date=new Date(l.input_date),l}async function L(l){return(await U.get("/users/"+l+"/thought_inputs")).data.map(a=>$(a))}async function M(l){const o=new Date(l.input_date);console.log("Date : ",o);const a=o.toISOString().split(".")[0];l.input_progress=Number(l.input_progress);const n=await U.post("/thought_inputs",{...l,input_date:a});return $(n.data)}function k(){return{getUserThoughtInputs:L,newThoughtInput:q,createThoughtInput:M}}const O={class:"text-center p-4 bg-slate-200"},R={class:"text-2xl bold"},z=_({__name:"UserInfos",props:{user:{}},setup(l){return(o,a)=>(i(),v("div",O,[d("div",R,g(o.user.first_name)+" "+g(o.user.last_name),1),d("div",null,g(o.user.handle),1)]))}}),E={key:0,class:"fixed top-0 left-0 w-full h-full z-10 bg-slate-500/50"},F={class:"max-w-xl overflow-y-scroll max-h-screen mb-10 bg-white mx-auto mt-6 p-4 rounded shadow"},P=_({__name:"ModalSheet",props:{open:{type:Boolean,default:!1}},setup(l){const o=l,a=m(!1);return b(()=>a.value=o.open),C(D(o).open,n=>a.value=n),(n,e)=>a.value?(i(),v("div",E,[d("div",F,[N(n.$slots,"default")])])):V("",!0)}}),W=d("div",null,"Nouvel apport",-1),j={class:"flex flex-wrap"},G={class:"flex flex-wrap"},H={class:"flex flex-row-reverse"},J=_({__name:"CreateThoughtInput",emits:["close"],setup(l,{emit:o}){const{newThoughtInput:a,createThoughtInput:n}=k(),e=m(a()),p=()=>{n(e.value),c()},c=()=>o("close");return(f,s)=>(i(),v("div",null,[W,u(r,{label:"titre de l'ouvrage",modelValue:e.value.resource_title,"onUpdate:modelValue":s[0]||(s[0]=t=>e.value.resource_title=t)},null,8,["modelValue"]),d("div",j,[u(r,{class:"h-8 mx-auto",label:"Nom de l'auteur",modelValue:e.value.resource_author_name,"onUpdate:modelValue":s[1]||(s[1]=t=>e.value.resource_author_name=t)},null,8,["modelValue"]),u(r,{class:"h-8 mx-auto",label:"type de resource",modelValue:e.value.resource_type,"onUpdate:modelValue":s[2]||(s[2]=t=>e.value.resource_type=t)},null,8,["modelValue"])]),d("div",G,[u(r,{class:"h-8 mx-auto",label:"Lien de la ressource",modelValue:e.value.resource_link,"onUpdate:modelValue":s[3]||(s[3]=t=>e.value.resource_link=t)},null,8,["modelValue"]),u(r,{class:"h-8 mx-auto",label:"Lien de l'image",modelValue:e.value.resource_image_link,"onUpdate:modelValue":s[4]||(s[4]=t=>e.value.resource_image_link=t)},null,8,["modelValue"])]),u(r,{label:"Commentaire sur l'ouvrage",modelValue:e.value.resource_comment,"onUpdate:modelValue":s[5]||(s[5]=t=>e.value.resource_comment=t)},null,8,["modelValue"]),u(r,{label:"Avancement de l'ouvrage",modelValue:e.value.input_progress,"onUpdate:modelValue":s[6]||(s[6]=t=>e.value.input_progress=t),type:"number"},null,8,["modelValue"]),u(r,{label:"Date de lecture",modelValue:e.value.input_date,"onUpdate:modelValue":s[7]||(s[7]=t=>e.value.input_date=t),type:"date"},null,8,["modelValue"]),u(r,{label:"Pourquoi s'y être interessé ?",modelValue:e.value.input_comment,"onUpdate:modelValue":s[8]||(s[8]=t=>e.value.input_comment=t)},null,8,["modelValue"]),d("div",H,[u(h,{onClick:p,class:"m-4",text:"Valider",type:"valid"}),u(h,{onClick:c,class:"m-4",text:"Annuler",type:"abort"})])]))}}),K={class:"m-8"},Q=d("div",{class:"text-center m-4 italic text-sm"},"Derniers apports extérieurs",-1),ee=_({__name:"UserFeedView",props:{pageUserId:{}},setup(l){const o=l,a=m(!1),{getUserById:n,user:e}=S(),p=m(null),{getUserThoughtInputs:c}=k(),f=m([]);return b(async()=>{p.value=await n(o.pageUserId),f.value=await c(o.pageUserId)}),(s,t)=>(i(),v("div",null,[d("div",K,[p.value?(i(),x(z,{key:0,class:"mx-auto border my-8",user:p.value},null,8,["user"])):V("",!0),Q,w(e)&&s.pageUserId==w(e).id?(i(),x(B,{key:1,class:"mx-auto md:mx-0",onClick:t[0]||(t[0]=I=>a.value=!0)},{default:y(()=>[T("+")]),_:1})):V("",!0),u(P,{open:a.value},{default:y(()=>[u(J,{onClose:t[1]||(t[1]=I=>a.value=!1)})]),_:1},8,["open"]),u(A,{class:"mx-auto","thought-inputs":f.value},null,8,["thought-inputs"])])]))}});export{ee as default};
