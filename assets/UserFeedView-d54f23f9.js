import{_ as h}from"./FeedList.vue_vue_type_script_setup_true_lang-a428d5e6.js";import{d as y,j as B,h as x,b as c,e as k,k as N,f as d,a as o,t as v,c as w,w as $,_ as E,n as V,i as t,q as I,o as r,p as b,u as j}from"./index-fd9978dd.js";import{_}from"./TextInput.vue_vue_type_script_setup_true_lang-b34f36a7.js";import{a as q,r as A,_ as P}from"./useThoughtInputs-a2b2f2b2.js";import{_ as R}from"./ActionButton.vue_vue_type_script_setup_true_lang-2b1a26ec.js";/* empty css                                                          */import{_ as D}from"./CreateThoughtInput.vue_vue_type_script_setup_true_lang-f32804d3.js";import"./SelectionTextInterface.vue_vue_type_style_index_0_lang-6609cac4.js";import"./useResourceRelations-d4074bec.js";import"./useResource-f55b075f.js";const F={class:"text-center p-4 bg-slate-200"},H={key:0,class:"relative"},M=["src"],S={class:"text-2xl bold"},T={class:"mt-4"},W={key:1},z={class:"flex mx-auto"},G={key:0,class:"flex"},J={class:"flex flex-row-reverse"},K=y({__name:"UserInfos",props:{user:{}},setup(U){const u=U,{user:m,debouncedUpdateUser:g}=I(),f=B(),p=x(()=>!u.user.is_platform_user||u.user.id===m.value.id),n=c(!1),l=c(null);return k(()=>{l.value=u.user,n.value=f.query.editingUser}),N(l,a=>g(a.id,a),{deep:!0}),(a,s)=>(r(),d("div",F,[n.value?(r(),d("div",W,[t(_,{class:"mx-auto w-2/3",modelValue:l.value.profile_picture_url,"onUpdate:modelValue":s[1]||(s[1]=e=>l.value.profile_picture_url=e),label:"Photo de profil"},null,8,["modelValue"]),o("div",z,[t(_,{class:"ml-auto",modelValue:l.value.first_name,"onUpdate:modelValue":s[2]||(s[2]=e=>l.value.first_name=e),label:"PrÃ©nom"},null,8,["modelValue"]),t(_,{class:"mr-auto",modelValue:l.value.last_name,"onUpdate:modelValue":s[3]||(s[3]=e=>l.value.last_name=e),label:"Nom"},null,8,["modelValue"])]),l.value.is_platform_user?(r(),d("div",G,[t(_,{class:"ml-auto",modelValue:l.value.handle,"onUpdate:modelValue":s[4]||(s[4]=e=>l.value.handle=e),label:"Handle"},null,8,["modelValue"]),t(_,{class:"mr-auto",modelValue:l.value.email,"onUpdate:modelValue":s[5]||(s[5]=e=>l.value.email=e),label:"Email"},null,8,["modelValue"])])):V("",!0),o("div",null,[t(q,{modelValue:l.value.biography,"onUpdate:modelValue":s[6]||(s[6]=e=>l.value.biography=e),label:"Bio"},null,8,["modelValue"])]),o("div",J,[t(R,{onClick:s[7]||(s[7]=e=>n.value=!1),text:"Valider",type:"valid"})])])):(r(),d("div",H,[o("img",{src:a.user.profile_picture_url,class:"mx-auto m-4 w-1/6"},null,8,M),o("div",S,v(a.user.first_name)+" "+v(a.user.last_name),1),o("div",null,v(a.user.handle),1),o("div",null,v(a.user.email),1),o("div",T,v(a.user.biography),1),p.value?(r(),w(E,{key:0,class:"right-4 absolute",onClick:s[0]||(s[0]=e=>n.value=!0)},{default:$(()=>[t(b(A),{class:"m-1"})]),_:1})):V("",!0)]))]))}}),L={class:"mt-8 md:mx-6"},oe=y({__name:"UserFeedView",props:{pageUserId:{}},setup(U){const u=U,m=c(!1),{getUserById:g,user:f}=I(),p=c(null),{getUserReadAndWriteInteractions:n,getInteractions:l}=j(),a=c([]),s=x(()=>a.value.map(e=>({resource:e.resource,date:e.interaction_date,user_id:e.interaction_user_id,context_comment:e.interaction_comment,progress:e.interaction_progress,...e})).sort((e,i)=>i.date-e.date));return k(async()=>{p.value=await g(u.pageUserId),a.value=await n(u.pageUserId);const e=await l("rvew");a.value=a.value.concat(e)}),(e,i)=>(r(),d("div",null,[o("div",L,[p.value?(r(),w(K,{key:0,class:"mx-auto border my-8",user:p.value},null,8,["user"])):V("",!0),b(f)&&e.pageUserId==b(f).id?(r(),d("div",{key:1,class:"italic underline text-xs mb-4",onClick:i[0]||(i[0]=C=>m.value=!0)}," Ajouter un nouvel apport ")):V("",!0),t(P,{open:m.value},{default:$(()=>[t(D,{onClose:i[1]||(i[1]=C=>m.value=!1)})]),_:1},8,["open"]),t(h,{"interactions-list":s.value},null,8,["interactions-list"])])]))}});export{oe as default};
