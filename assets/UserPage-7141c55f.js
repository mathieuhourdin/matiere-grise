import{d as k,u as w,r as _,o as P,y as z,c as i,m as S,l as t,e as s,w as g,z as y,b as u,f as V,t as C,S as E,U as N,Q as B,M as I}from"./index-7b431e64.js";import{_ as r}from"./TextInput.vue_vue_type_script_setup_true_lang-26753b96.js";import{_ as b}from"./TextAreaInput.vue_vue_type_script_setup_true_lang-0c0d36a2.js";import{_ as $}from"./CheckboxInput.vue_vue_type_script_setup_true_lang-7cf91ce3.js";const v=n=>(E("data-v-5c818a18"),n=n(),N(),n),M={class:"min-h-screen text-slate-100 p-2 md:p-10 md:w-11/12 mx-auto"},D=v(()=>t("h1",{class:"text-2xl font-bold mb-4"},"Mon profil",-1)),F={key:0,class:"text-center p-8"},H=v(()=>t("p",null,"Chargement...",-1)),q=[H],A={key:1,class:"max-w-2xl"},L={class:"mb-6 text-center"},Q=["src"],R={key:1,class:"mx-auto w-32 h-32 rounded-full bg-gray-300 dark:bg-gray-700 flex items-center justify-center"},T=v(()=>t("span",{class:"text-gray-500 dark:text-gray-400 text-4xl"},"ðŸ‘¤",-1)),W=[T],G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={class:"col-span-2"},K={class:"col-span-2"},O={class:"col-span-2"},X={class:"mt-6 flex flex-row-reverse gap-4"},Y=k({__name:"UserPage",setup(n){const{user:o,updateUser:x,loadUser:f}=w(),{launchSnackbar:m}=B(),e=_({email:"",first_name:"",last_name:"",handle:"",pseudonym:"",pseudonymized:!1,profile_picture_url:"",biography:"",high_level_projects_definition:""}),d=_(null),p=_(!1);P(async()=>{o.value||await f(),o.value&&h()}),z(()=>o.value,()=>{o.value&&h()},{deep:!0});function h(){o.value&&(e.value={...o.value,biography:o.value.biography||"",high_level_projects_definition:o.value.high_level_projects_definition||""},d.value={...o.value,biography:o.value.biography||"",high_level_projects_definition:o.value.high_level_projects_definition||""})}function U(){d.value&&(e.value={...d.value})}async function j(){var c;if(!p.value){if(!((c=o.value)!=null&&c.id)){m("Utilisateur non trouvÃ©","error");return}p.value=!0;try{e.value.handle&&!e.value.handle.startsWith("@")&&(e.value.handle="@"+e.value.handle);const l=await x(o.value.id,e.value);d.value={...e.value},await f(),m("Profil mis Ã  jour avec succÃ¨s","success")}catch(l){console.error("Error updating user:",l),m("Erreur lors de la mise Ã  jour du profil","error")}finally{p.value=!1}}}return(c,l)=>(u(),i("div",M,[D,S(o)?(u(),i("div",A,[t("div",L,[e.value.profile_picture_url?(u(),i("img",{key:0,src:e.value.profile_picture_url,alt:"Profile picture",class:"mx-auto w-32 h-32 rounded-full object-cover border-2 border-gray-400 dark:border-gray-600"},null,8,Q)):(u(),i("div",R,W))]),t("div",G,[s(r,{class:"col-span-2",label:"Photo de profil (URL)",modelValue:e.value.profile_picture_url,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.profile_picture_url=a),placeholder:"https://example.com/image.jpg"},null,8,["modelValue"]),s(r,{label:"PrÃ©nom",modelValue:e.value.first_name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.first_name=a),placeholder:"Votre prÃ©nom"},null,8,["modelValue"]),s(r,{label:"Nom",modelValue:e.value.last_name,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.last_name=a),placeholder:"Votre nom"},null,8,["modelValue"]),s(r,{label:"Pseudo",modelValue:e.value.pseudonym,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.pseudonym=a),placeholder:"Votre pseudo"},null,8,["modelValue"]),t("div",J,[s($,{modelValue:e.value.pseudonymized,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.pseudonymized=a),label:"Ne montrer que votre pseudo"},null,8,["modelValue"])]),s(r,{label:"Email",modelValue:e.value.email,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.email=a),type:"email",placeholder:"votre@email.com",autocomplete:"email"},null,8,["modelValue"]),s(r,{label:"Handle",modelValue:e.value.handle,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.handle=a),placeholder:"@votre_handle"},null,8,["modelValue"]),t("div",K,[s(b,{modelValue:e.value.biography,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.biography=a),label:"Biographie",placeholder:"Parlez-nous de vous...",class:"h-80"},null,8,["modelValue"])]),t("div",O,[s(b,{modelValue:e.value.high_level_projects_definition,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.high_level_projects_definition=a),label:"High level projects definition",placeholder:"DÃ©crivez vos projets et objectifs globaux...",class:"h-48"},null,8,["modelValue"])])]),t("div",X,[s(y,{onClick:j,type:"valid"},{default:g(()=>[V(C(p.value?"Enregistrement...":"Enregistrer"),1)]),_:1}),s(y,{onClick:U,type:"abort"},{default:g(()=>[V(" Annuler ")]),_:1})])])):(u(),i("div",F,q))]))}});const oe=I(Y,[["__scopeId","data-v-5c818a18"]]);export{oe as default};
