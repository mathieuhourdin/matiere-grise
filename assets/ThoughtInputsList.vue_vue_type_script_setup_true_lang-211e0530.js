import{_ as y}from"./useThoughtInputs-74ac05b1.js";import{d as h,r as f,j as w,D as I,q as x,y as $,c as r,f as n,g as C,E as b,G as E,a as p,o as a,n as B,s as S,t as i,h as c,w as _,z as v,x as T,i as k,e as L,F as N,m as V,H as z}from"./index-40ff7ad7.js";const D={class:"flex"},F=h({__name:"ModalSheet",props:{open:{type:Boolean,default:!1}},emits:["close"],setup(d,{emit:u}){const l=d,s=f(!1);return w(()=>{s.value=l.open}),I(()=>{const e=o=>{(o.key==="Escape"||o.key==="Enter"||o.key==="Esc"||o.keyCode===27)&&u("close")};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),x($(l).open,e=>s.value=e),(e,o)=>s.value?(a(),r("div",{key:0,tabindex:"0",onKeyup:o[2]||(o[2]=E(t=>u("close"),["esc"])),class:"fixed top-0 left-0 w-full h-full z-10 bg-slate-500/50",onClick:o[3]||(o[3]=t=>u("close"))},[n("div",{class:"max-w-xl overflow-y-scroll max-h-screen mb-10 bg-white mx-auto mt-6 p-4 rounded shadow",onClick:o[1]||(o[1]=b(()=>{},["stop"]))},[n("div",D,[n("div",{class:"ml-auto",onClick:o[0]||(o[0]=t=>u("close"))},"x")]),C(e.$slots,"default")])],32)):p("",!0)}}),M={class:"w-full md:w-96"},O={key:0,class:"text-xs italic mb-2"},K={class:"border shadow-lg rounded p-4 md:w-96"},R={class:"flex"},U=["src"],j={class:"flex flex-wrap w-full",style:{"margin-top":"-8px"}},q={class:"text-2xs italic"},A={class:"ml-auto m-1 w-1/3"},G={class:"text-2xs"},H={class:"flex flex-wrap"},P={key:0,class:"text-2xs italic"},W=h({__name:"ThoughtInputCard",props:{thoughtInput:{}},setup(d){const u=d,{getUserById:l}=L(),s=f(null);B(()=>s.value&&s.value.id===user.value.id),w(async()=>s.value=await l(u.thoughtInput.input_user_id));const e=t=>t.toLocaleString("fr-FR",{hour:"numeric",weekday:"short",day:"numeric",month:"short",year:"2-digit"}),o=t=>t.length>200?t.slice(0,150)+"...":t;return(t,g)=>{const m=S("router-link");return a(),r("div",M,[t.thoughtInput.usage_reason?(a(),r("div",O,i(t.thoughtInput.usage_reason),1)):p("",!0),n("div",K,[n("div",R,[n("img",{class:"w-8 h-fit mr-4",src:t.thoughtInput.resource_image_link},null,8,U),n("div",null,[n("div",null,[c(m,{to:"/thought_inputs/"+t.thoughtInput.id},{default:_(()=>[v(i(t.thoughtInput.resource_title),1)]),_:1},8,["to"])]),n("div",j,[n("div",q,i(t.thoughtInput.resource_author_name),1),n("div",A,[c(T,{"progress-value":t.thoughtInput.input_progress},null,8,["progress-value"])])]),n("div",G,i(o(t.thoughtInput.input_comment)),1)])]),n("div",H,[t.thoughtInput.input_date?(a(),r("div",P,i(e(t.thoughtInput.input_date)),1)):p("",!0),s.value?(a(),k(m,{key:1,to:"/users/"+s.value.id,class:"ml-auto text-2xs underline"},{default:_(()=>[v(i(s.value.first_name)+" "+i(s.value.last_name),1)]),_:1},8,["to"])):p("",!0)])])])}}}),J={class:"w-fit"},Q=h({__name:"ThoughtInputCardWithPopup",props:{thoughtInput:{}},setup(d){const u=f(!1);return(l,s)=>(a(),r("div",J,[c(F,{open:u.value,onClose:s[0]||(s[0]=e=>u.value=!1)},{default:_(()=>[c(y,{"thought-input":l.thoughtInput},null,8,["thought-input"])]),_:1},8,["open"]),c(W,{class:"md:w-96","thought-input":l.thoughtInput,onClick:s[1]||(s[1]=e=>u.value=!0)},null,8,["thought-input"])]))}}),X={class:"relative max-w-full"},Y={key:0,class:"absolute md:border h-full start-1/2"},et=h({__name:"ThoughtInputsList",props:{thoughtInputs:{},center:{type:Boolean,default:!1}},emits:["select"],setup(d,{emit:u}){const l=e=>e.sort((o,t)=>t.input_date-o.input_date),s=e=>{console.log("Select"),u("select",e)};return(e,o)=>(a(),r("div",X,[e.center?p("",!0):(a(),r("div",Y)),(a(!0),r(N,null,V(l(e.thoughtInputs),(t,g)=>(a(),k(Q,{key:t.id,class:z(["mb-4 md:mb-1 mx-auto max-w-full max-w-fit p-1",{"md:ml-0":g%2==0&&!e.center,"md:mr-0":!e.center}]),"thought-input":t,onClick:m=>s(t)},null,8,["class","thought-input","onClick"]))),128))]))}});export{et as _,F as a};
