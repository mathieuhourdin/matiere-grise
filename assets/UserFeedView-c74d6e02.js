import{d as g,n as $,r as m,f as b,v as I,c,h as o,t as _,m as k,w,x as B,a as U,j as t,l as N,e as y,o as u,u as V}from"./index-2d9dee02.js";import{_ as d}from"./TextInput.vue_vue_type_script_setup_true_lang-3836d4b9.js";import{r as h,b as T,c as j,u as D}from"./ResourceComponent.vue_vue_type_script_setup_true_lang-467febc9.js";import{_ as E}from"./CreateThoughtInput.vue_vue_type_script_setup_true_lang-f4a22f4c.js";import"./TextInterface.vue_vue_type_script_setup_true_lang-3692a505.js";import"./useResource-ca202f8b.js";import"./useProblem-3b80ea9e.js";const P={class:"text-center p-4 bg-slate-200"},A={key:0},F=["src"],H={class:"text-2xl bold"},M={key:1},R={class:"flex mx-auto"},S={class:"flex"},q={class:"flex flex-row-reverse"},z=g({__name:"UserInfos",props:{user:{}},setup(f){const n=f,{user:i,debouncedUpdateUser:x}=y(),p=$(()=>n.user.id===i.value.id),r=m(!1),l=m(null);return b(()=>l.value=n.user),I(l,a=>x(a.id,a),{deep:!0}),(a,s)=>(u(),c("div",P,[r.value?(u(),c("div",M,[t(d,{class:"mx-auto w-2/3",modelValue:l.value.profile_picture_url,"onUpdate:modelValue":s[1]||(s[1]=e=>l.value.profile_picture_url=e),label:"Photo de profil"},null,8,["modelValue"]),o("div",R,[t(d,{class:"ml-auto",modelValue:l.value.first_name,"onUpdate:modelValue":s[2]||(s[2]=e=>l.value.first_name=e),label:"Prénom"},null,8,["modelValue"]),t(d,{class:"mr-auto",modelValue:l.value.last_name,"onUpdate:modelValue":s[3]||(s[3]=e=>l.value.last_name=e),label:"Nom"},null,8,["modelValue"])]),o("div",S,[t(d,{class:"ml-auto",modelValue:l.value.handle,"onUpdate:modelValue":s[4]||(s[4]=e=>l.value.handle=e),label:"Handle"},null,8,["modelValue"]),t(d,{class:"mr-auto",modelValue:l.value.email,"onUpdate:modelValue":s[5]||(s[5]=e=>l.value.email=e),label:"Email"},null,8,["modelValue"])]),o("div",q,[t(N,{onClick:s[6]||(s[6]=e=>r.value=!1),text:"Valider",type:"valid"})])])):(u(),c("div",A,[o("img",{src:a.user.profile_picture_url,class:"mx-auto m-4 w-1/6"},null,8,F),o("div",H,_(a.user.first_name)+" "+_(a.user.last_name),1),o("div",null,_(a.user.handle),1),o("div",null,_(a.user.email),1),p.value?(u(),k(B,{key:0,class:"right-4 absolute",onClick:s[0]||(s[0]=e=>r.value=!0)},{default:w(()=>[t(V(h),{class:"m-1"})]),_:1})):U("",!0)]))]))}}),G={class:"m-8"},J=o("div",{class:"text-center m-4 italic text-sm"},"Derniers apports extérieurs",-1),Z=g({__name:"UserFeedView",props:{pageUserId:{}},setup(f){const n=f,i=m(!1),{getUserById:x,user:p}=y(),r=m(null),{getUserThoughtInputs:l}=D(),a=m([]),s=$(()=>a.value.map(e=>({resource:e.resource,date:e.interaction_date,user_id:e.interaction_user_id,context_comment:e.interaction_comment,progress:e.interaction_progress})));return b(async()=>{r.value=await x(n.pageUserId),a.value=await l(n.pageUserId)}),(e,v)=>(u(),c("div",null,[o("div",G,[r.value?(u(),k(z,{key:0,class:"mx-auto border my-8",user:r.value},null,8,["user"])):U("",!0),J,V(p)&&e.pageUserId==V(p).id?(u(),c("div",{key:1,class:"italic underline text-xs",onClick:v[0]||(v[0]=C=>i.value=!0)}," Ajouter un nouvel apport ")):U("",!0),t(T,{open:i.value},{default:w(()=>[t(E,{onClose:v[1]||(v[1]=C=>i.value=!1)})]),_:1},8,["open"]),t(j,{class:"mx-auto","contextual-resources":s.value},null,8,["contextual-resources"])])]))}});export{Z as default};
