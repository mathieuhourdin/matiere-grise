import{a as v,u as w}from"./useThoughtOutput-31bcb5c3.js";import{A as P,d as h,r as _,l as b,B as y,o as i,c,h as g,w as x,f as e,t as r,m as k,F as T,p as D}from"./index-b78d04a6.js";const{createThoughtOutput:C}=v(),$=()=>({title:"",description:"",content:"",publishing_state:"drft",image_url:"",output_type:"pblm",progress:0,potential_improvements:"",maturing_state:""}),B=o=>o,F=async()=>(await P.get("/problems")).data.map(s=>B(s));function I(){return{newProblem:$,getProblems:F,createProblem:C}}const A={class:"border shadow-xl rounded m-2 p-4 h-72 w-60"},N={class:"max-h-full"},O=["src"],R={class:"h-full"},V={class:"mb-2"},q={class:"text-2xs italic",style:{"margin-top":"-8px"}},L={class:"text-2xs mb-auto"},S={class:"flex mt-2"},U={class:"text-2xs italic mt-auto"},j={class:"ml-auto text-2xs underline"},E=h({__name:"ProblemCard",props:{problem:{}},setup(o){const s=o,u=t=>new Date(t.split(".")[0]).toLocaleString("fr-FR",{hour:"numeric",weekday:"short",day:"numeric",month:"short",year:"2-digit"}),m=t=>t.length>200?t.slice(0,150)+"...":t,a=_([]),{getThoughtInputUsagesForThoughtOutput:n}=w(),d=async()=>{a.value=await n(s.problem.id)};return b(()=>d()),(t,l)=>{const p=y("router-link");return i(),c("div",A,[g(p,{to:"/thought_outputs/"+t.problem.id},{default:x(()=>[e("div",N,[e("img",{class:"h-28 mx-auto mb-4",src:t.problem.image_url},null,8,O),e("div",R,[e("div",V,r(t.problem.title),1),e("div",q,r(t.problem.owner_id),1),e("div",L,r(m(t.problem.description)),1),e("div",S,[e("div",U,r(u(t.problem.created_at)),1),e("div",j,r(a.value.length)+" inputs",1)])])])]),_:1},8,["to"])])}}}),H={class:"m-4"},M=e("div",null,"Histoire et sociétés",-1),W=e("hr",{class:"border-top border-slate-800 border-dashed my-1"},null,-1),z={class:"flex flex-wrap"},K=h({__name:"ProblemsView",setup(o){const s=k(),{getProblems:u,newProblem:m,createProblem:a}=I(),n=_([]),d=async()=>{const t=m(),l=await a(t);s.push({path:"/thought_outputs/"+l.id,query:{editing:!0}})};return b(async()=>n.value=await u()),(t,l)=>(i(),c("div",null,[e("div",H,[e("div",{class:"underline italic",onClick:d},"Ajouter une problématique"),M,W,e("div",z,[(i(!0),c(T,null,D(n.value,(p,f)=>(i(),c("div",{key:f},[g(E,{problem:p},null,8,["problem"])]))),128))])])]))}});export{K as default};
