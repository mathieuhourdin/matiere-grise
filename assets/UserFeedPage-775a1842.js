import{_ as h}from"./FeedList.vue_vue_type_script_setup_true_lang-febbeb80.js";import{d as x,u as w,i as B,j as I,r as V,o as $,y as N,c as m,l as t,m as b,t as n,h as _,w as k,_ as C,k as f,e as r,z as P,b as o,A as z,f as E,v as q}from"./index-23800723.js";import{_ as i}from"./TextInput.vue_vue_type_script_setup_true_lang-1e5914e2.js";import{_ as A}from"./CheckboxInput.vue_vue_type_script_setup_true_lang-47953296.js";import{_ as F}from"./TextAreaInput.vue_vue_type_script_setup_true_lang-216125f6.js";import"./UserMini.vue_vue_type_script_setup_true_lang-e7c5ea3f.js";import"./useResourceRelations-d13a3725.js";import"./PaperAirplaneIcon-8d42bc1d.js";const R={class:"text-center p-4 bg-slate-200"},S={key:0,class:"relative"},j=["src"],D={key:0,class:"text-2xl bold"},H={key:1,class:"text-2xl bold"},M={class:"mt-4"},T={key:1},W={class:"grid grid-cols-2 gap-y-1 gap-x-2"},G={class:"col-span-1 flex flex-col"},J={class:"col-span-2"},K={class:"mt-2 flex flex-row-reverse"},L=x({__name:"UserInfos",props:{user:{}},setup(y){const u=y,{user:c,debouncedUpdateUser:U}=w(),p=B(),v=I(()=>!u.user.is_platform_user||u.user.id===c.value.id),d=V(!1),s=V(null);return $(()=>{s.value=u.user,d.value=p.query.editingUser}),N(s,a=>{v.value&&U(a.id,a)},{deep:!0}),(a,l)=>(o(),m("div",R,[d.value?(o(),m("div",T,[t("div",W,[r(i,{class:"col-span-2",modelValue:s.value.profile_picture_url,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value.profile_picture_url=e),label:"Photo de profil"},null,8,["modelValue"]),r(i,{class:"col-span-1",modelValue:s.value.first_name,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value.first_name=e),label:"PrÃ©nom"},null,8,["modelValue"]),r(i,{class:"col-span-1",modelValue:s.value.last_name,"onUpdate:modelValue":l[3]||(l[3]=e=>s.value.last_name=e),label:"Nom"},null,8,["modelValue"]),r(i,{class:"col-span-1",modelValue:s.value.pseudonym,"onUpdate:modelValue":l[4]||(l[4]=e=>s.value.pseudonym=e),label:"Pseudo"},null,8,["modelValue"]),t("div",G,[r(A,{class:"item-center mr-auto my-auto",modelValue:s.value.pseudonymized,"onUpdate:modelValue":l[5]||(l[5]=e=>s.value.pseudonymized=e),label:"Ne montrer que votre pseudo"},null,8,["modelValue"])]),s.value.is_platform_user?(o(),_(i,{key:0,class:"col-span-1",modelValue:s.value.handle,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value.handle=e),label:"Handle"},null,8,["modelValue"])):f("",!0),s.value.is_platform_user?(o(),_(i,{key:1,class:"col-span-1",modelValue:s.value.email,"onUpdate:modelValue":l[7]||(l[7]=e=>s.value.email=e),label:"Email"},null,8,["modelValue"])):f("",!0),t("div",J,[r(F,{modelValue:s.value.biography,"onUpdate:modelValue":l[8]||(l[8]=e=>s.value.biography=e),label:"Bio"},null,8,["modelValue"])])]),t("div",K,[r(P,{onClick:l[9]||(l[9]=e=>d.value=!1),type:"valid"},{default:k(()=>[E("Valider")]),_:1})])])):(o(),m("div",S,[t("img",{src:a.user.profile_picture_url,class:"mx-auto m-4 w-1/6"},null,8,j),a.user.id===b(c).id?(o(),m("div",D,n(a.user.first_name)+" "+n(a.user.last_name)+" "+n(a.user.pseudonym),1)):(o(),m("div",H,n(a.user.display_name),1)),t("div",null,n(a.user.handle),1),t("div",null,n(a.user.email),1),t("div",M,n(a.user.biography),1),v.value?(o(),_(C,{key:2,class:"right-4 absolute",onClick:l[0]||(l[0]=e=>d.value=!0)},{default:k(()=>[r(b(z),{class:"m-1"})]),_:1})):f("",!0)]))]))}}),O={class:"mt-8 md:mx-6"},oe=x({__name:"UserFeedPage",props:{pageUserId:{}},setup(y){const u=y,{getUserById:c,user:U}=w(),p=V(null),{getUserReadAndWriteInteractions:v,getInteractions:d,interactionSortFunction:s}=q(),a=V([]),l=I(()=>a.value.map(e=>({resource:e.resource,date:e.interaction_date,user_id:e.interaction_user_id,context_comment:e.interaction_comment,progress:e.interaction_progress,...e})).sort((e,g)=>s(g)-s(e)));return $(async()=>{p.value=await c(u.pageUserId),a.value=await v(u.pageUserId);const e=await d({interaction_type:"rvew",interaction_user_id:u.pageUserId});a.value=a.value.concat(e)}),(e,g)=>(o(),m("div",null,[t("div",O,[p.value?(o(),_(L,{key:0,class:"mx-auto border my-8",user:p.value},null,8,["user"])):f("",!0),r(h,{"interactions-list":l.value},null,8,["interactions-list"])])]))}});export{oe as default};
