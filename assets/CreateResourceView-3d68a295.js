import{q as V,d as y,b as u,o as n,f as r,i as l,s as k,a as b,m as p,w,l as $,c as C,p as g}from"./index-9a0bf8fb.js";import{_ as h}from"./SelectInput.vue_vue_type_script_setup_true_lang-2cbb2e9f.js";import{_ as x}from"./TextInput.vue_vue_type_script_setup_true_lang-d9c70f17.js";import{_ as f}from"./ActionButton.vue_vue_type_script_setup_true_lang-a491165c.js";import{_ as P}from"./UserPicker.vue_vue_type_script_setup_true_lang-a232ad5d.js";async function U(_){return(await V.post("/link_preview",_)).data}function E(){return{postLinkPreview:U}}const L={class:"mx-10 mt-10"},N={key:0},B=["src"],R=y({__name:"ExternalResourcePreview",setup(_){const{postLinkPreview:s}=E(),c=async()=>{const i=await s({external_content_url:d.value});console.log(i),a.value=i},d=u(""),a=u(null),m=u([{text:"Livre",value:"book"},{text:"Fiche de lecture",value:"shet"},{text:"Article de média",value:"natc"},{text:"Article de recherche",value:"ratc"},{text:"Film",value:"movi"},{text:"Podcast",value:"pcst"}]);return(i,e)=>(n(),r("div",L,[l(x,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),class:"mb-4",onKeyup:k(c,["enter"]),label:"Lien ressource externe"},null,8,["modelValue","onKeyup"]),a.value?(n(),r("div",N,[l(x,{class:"mb-4",modelValue:a.value.title,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.title=t),label:"Titre"},null,8,["modelValue"]),l(x,{class:"mb-4",modelValue:a.value.subtitle,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.subtitle=t),label:"Description"},null,8,["modelValue"]),b("img",{class:"mb-4",src:a.value.image_url},null,8,B),l(h,{label:"Type de ressource",class:"mb-4",choices:m.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.emitChange("resource_type",t)),"model-value":a.value.resource_type},null,8,["choices","model-value"])])):p("",!0),l(f,{class:"mb-4",text:"Preview",onClick:c,type:"valid"},{default:w(()=>[$("Générer")]),_:1})]))}}),T={class:"mt-10 mx-5"},A={key:0},D={key:1},K={key:2},F={key:0},I={key:1},q=y({__name:"CreateResourceProcess",setup(_){const s=u(0),c=u({id:"",title:"",subtitle:"",content:"",external_content_url:"",publishing_state:"",maturing_state:"",image_url:"",resource_type:"",comment:"",is_local_draft:!0}),d=t=>{e.value=t,t?(s.value=1,c.maturing_state="fnsh"):(m.value=a.value.id,c.value.maturing_state="idea",s.value=2)},{user:a}=g(),m=u(null),i=u(null),e=u(!1);return(t,o)=>(n(),r("div",T,[s.value===0?(n(),r("div",A,[b("div",null,[l(f,{class:"mb-2",text:"Resource Externe",type:"valid",onClick:o[0]||(o[0]=v=>d(!0))}),l(f,{text:"Production personnelle",type:"valid",onClick:o[1]||(o[1]=v=>d(!1))})])])):p("",!0),s.value===1?(n(),r("div",D,[l(P,{class:"mb-4",modelValue:m.value,"onUpdate:modelValue":o[2]||(o[2]=v=>m.value=v)},null,8,["modelValue"]),m.value?(n(),C(x,{key:0,class:"text-2xs mb-4",label:"Date d'écriture","model-value":i.value,"onUpdate:modelValue":o[3]||(o[3]=v=>i.value=v),type:"date"},null,8,["model-value"])):p("",!0),l(f,{type:"valid",text:"Valider",onClick:o[4]||(o[4]=v=>s.value=2)})])):p("",!0),s.value===2?(n(),r("div",K,[e.value?(n(),r("div",F,[l(R)])):(n(),r("div",I,"Nouvelle resource"))])):p("",!0)]))}}),G={class:"w-full"},H=y({__name:"CreateResourceView",setup(_){return(s,c)=>(n(),r("div",G,[l(q)]))}});export{H as default};
