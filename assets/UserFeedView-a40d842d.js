import{_ as h}from"./FeedList.vue_vue_type_script_setup_true_lang-eab460e6.js";import{_ as C}from"./RoundLinkButton.vue_vue_type_style_index_0_lang-0fcaa2fc.js";import{_ as p}from"./TextInput.vue_vue_type_script_setup_true_lang-cefcc0d5.js";import{b as B,r as N,_ as E}from"./useThoughtInputs-065fd9a6.js";import{_ as A}from"./ActionButton.vue_vue_type_script_setup_true_lang-eac7aa06.js";import{d as g,u as M,c as y,r as _,o as k,w as P,a as i,g as o,t as v,h as x,i as $,k as f,b as t,n as w,e as r,l as b}from"./index-7557a301.js";import{_ as R}from"./CreateThoughtInput.vue_vue_type_script_setup_true_lang-cbb244b7.js";import{u as j}from"./useInteraction-85556e33.js";import"./useResourceRelations-cc19fe57.js";const q={class:"text-center p-4 bg-slate-200"},D={key:0},F=["src"],H={class:"text-2xl bold"},S={class:"mt-4"},T={key:1},W={class:"flex mx-auto"},z={key:0,class:"flex"},G={class:"flex flex-row-reverse"},J=g({__name:"UserInfos",props:{user:{}},setup(V){const u=V,{user:d,debouncedUpdateUser:U}=w(),c=M(),m=y(()=>!u.user.is_platform_user||u.user.id===d.value.id),n=_(!1),l=_(null);return k(()=>{l.value=u.user,n.value=c.query.editingUser}),P(l,a=>U(a.id,a),{deep:!0}),(a,e)=>(r(),i("div",q,[n.value?(r(),i("div",T,[t(p,{class:"mx-auto w-2/3",modelValue:l.value.profile_picture_url,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.profile_picture_url=s),label:"Photo de profil"},null,8,["modelValue"]),o("div",W,[t(p,{class:"ml-auto",modelValue:l.value.first_name,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.first_name=s),label:"PrÃ©nom"},null,8,["modelValue"]),t(p,{class:"mr-auto",modelValue:l.value.last_name,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.last_name=s),label:"Nom"},null,8,["modelValue"])]),l.value.is_platform_user?(r(),i("div",z,[t(p,{class:"ml-auto",modelValue:l.value.handle,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.handle=s),label:"Handle"},null,8,["modelValue"]),t(p,{class:"mr-auto",modelValue:l.value.email,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.email=s),label:"Email"},null,8,["modelValue"])])):f("",!0),o("div",null,[t(B,{modelValue:l.value.biography,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.biography=s),label:"Bio"},null,8,["modelValue"])]),o("div",G,[t(A,{onClick:e[7]||(e[7]=s=>n.value=!1),text:"Valider",type:"valid"})])])):(r(),i("div",D,[o("img",{src:a.user.profile_picture_url,class:"mx-auto m-4 w-1/6"},null,8,F),o("div",H,v(a.user.first_name)+" "+v(a.user.last_name),1),o("div",null,v(a.user.handle),1),o("div",null,v(a.user.email),1),o("div",S,v(a.user.biography),1),m.value?(r(),x(C,{key:0,class:"right-4 absolute",onClick:e[0]||(e[0]=s=>n.value=!0)},{default:$(()=>[t(b(N),{class:"m-1"})]),_:1})):f("",!0)]))]))}}),K={class:"m-8"},ae=g({__name:"UserFeedView",props:{pageUserId:{}},setup(V){const u=V,d=_(!1),{getUserById:U,user:c}=w(),m=_(null),{getUserReadAndWriteInteractions:n}=j(),l=_([]),a=y(()=>l.value.map(e=>({resource:e.resource,date:e.interaction_date,user_id:e.interaction_user_id,context_comment:e.interaction_comment,progress:e.interaction_progress,...e})).sort((e,s)=>.5-Math.random()));return k(async()=>{m.value=await U(u.pageUserId),l.value=await n(u.pageUserId)}),(e,s)=>(r(),i("div",null,[o("div",K,[m.value?(r(),x(J,{key:0,class:"mx-auto border my-8",user:m.value},null,8,["user"])):f("",!0),b(c)&&e.pageUserId==b(c).id?(r(),i("div",{key:1,class:"italic underline text-xs mb-4",onClick:s[0]||(s[0]=I=>d.value=!0)}," Ajouter un nouvel apport ")):f("",!0),t(E,{open:d.value},{default:$(()=>[t(R,{onClose:s[1]||(s[1]=I=>d.value=!1)})]),_:1},8,["open"]),t(h,{"interactions-list":a.value},null,8,["interactions-list"])])]))}});export{ae as default};
