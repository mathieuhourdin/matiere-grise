import{d as g,q as $,r as m,g as k,x as I,c,i as o,t as _,p as b,w as y,y as B,a as U,k as t,n as N,e as w,o as u,u as V}from"./index-75030acf.js";import{_ as d}from"./TextInput.vue_vue_type_script_setup_true_lang-fb9b53c0.js";import{r as T,b as h,c as D,u as E}from"./ResourceComponent.vue_vue_type_script_setup_true_lang-8144b53c.js";import{_ as P}from"./CreateThoughtInput.vue_vue_type_script_setup_true_lang-780cfecc.js";import"./TextInterface.vue_vue_type_script_setup_true_lang-396db13b.js";import"./useResource-cdf1f65b.js";import"./useProblem-65e556c3.js";const j={class:"text-center p-4 bg-slate-200"},q={key:0},A=["src"],F={class:"text-2xl bold"},H={key:1},M={class:"flex mx-auto"},R={class:"flex"},S={class:"flex flex-row-reverse"},z=g({__name:"UserInfos",props:{user:{}},setup(f){const n=f,{user:i,debouncedUpdateUser:x}=w(),p=$(()=>n.user.id===i.value.id),r=m(!1),l=m(null);return k(()=>l.value=n.user),I(l,a=>x(a.id,a),{deep:!0}),(a,s)=>(u(),c("div",j,[r.value?(u(),c("div",H,[t(d,{class:"mx-auto w-2/3",modelValue:l.value.profile_picture_url,"onUpdate:modelValue":s[1]||(s[1]=e=>l.value.profile_picture_url=e),label:"Photo de profil"},null,8,["modelValue"]),o("div",M,[t(d,{class:"ml-auto",modelValue:l.value.first_name,"onUpdate:modelValue":s[2]||(s[2]=e=>l.value.first_name=e),label:"Prénom"},null,8,["modelValue"]),t(d,{class:"mr-auto",modelValue:l.value.last_name,"onUpdate:modelValue":s[3]||(s[3]=e=>l.value.last_name=e),label:"Nom"},null,8,["modelValue"])]),o("div",R,[t(d,{class:"ml-auto",modelValue:l.value.handle,"onUpdate:modelValue":s[4]||(s[4]=e=>l.value.handle=e),label:"Handle"},null,8,["modelValue"]),t(d,{class:"mr-auto",modelValue:l.value.email,"onUpdate:modelValue":s[5]||(s[5]=e=>l.value.email=e),label:"Email"},null,8,["modelValue"])]),o("div",S,[t(N,{onClick:s[6]||(s[6]=e=>r.value=!1),text:"Valider",type:"valid"})])])):(u(),c("div",q,[o("img",{src:a.user.profile_picture_url,class:"mx-auto m-4 w-1/6"},null,8,A),o("div",F,_(a.user.first_name)+" "+_(a.user.last_name),1),o("div",null,_(a.user.handle),1),o("div",null,_(a.user.email),1),p.value?(u(),b(B,{key:0,class:"right-4 absolute",onClick:s[0]||(s[0]=e=>r.value=!0)},{default:y(()=>[t(V(T),{class:"m-1"})]),_:1})):U("",!0)]))]))}}),G={class:"m-8"},J=o("div",{class:"text-center m-4 italic text-sm"},"Derniers apports extérieurs",-1),Z=g({__name:"UserFeedView",props:{pageUserId:{}},setup(f){const n=f,i=m(!1),{getUserById:x,user:p}=w(),r=m(null),{getUserThoughtInputs:l}=E(),a=m([]),s=$(()=>a.value.map(e=>({resource:e.resource,date:e.interaction_date,user_id:e.interaction_user_id,context_comment:e.interaction_comment,progress:e.interaction_progress})));return k(async()=>{r.value=await x(n.pageUserId),a.value=await l(n.pageUserId)}),(e,v)=>(u(),c("div",null,[o("div",G,[r.value?(u(),b(z,{key:0,class:"mx-auto border my-8",user:r.value},null,8,["user"])):U("",!0),J,V(p)&&e.pageUserId==V(p).id?(u(),c("div",{key:1,class:"italic underline text-xs",onClick:v[0]||(v[0]=C=>i.value=!0)}," Ajouter un nouvel apport ")):U("",!0),t(h,{open:i.value},{default:y(()=>[t(P,{onClose:v[1]||(v[1]=C=>i.value=!1)})]),_:1},8,["open"]),t(D,{class:"mx-auto","contextual-resources":s.value},null,8,["contextual-resources"])])]))}});export{Z as default};
