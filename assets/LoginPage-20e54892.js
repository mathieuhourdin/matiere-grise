import{d as V,i as M,u as I,r as f,b as v,c as g,l as e,J as p,a3 as _,t as y,k as S,S as z,U as E,M as F,y as A,j as L,q as j,a4 as q,f as B,p as U,h as P}from"./index-ae4d109a.js";const w=c=>(z("data-v-e52f047f"),c=c(),E(),c),N={class:"rounded-xl border border-gray-700 bg-elevated p-6 md:p-7"},T=w(()=>e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold text-gray-200"},"Connexion"),e("p",{class:"mt-2 text-sm text-gray-300"},"Entre ton email et ton mot de passe."),e("div",{class:"mt-4 h-px w-full bg-gradient-to-r from-emerald-400/65 via-teal-300/45 to-transparent"})],-1)),D={class:"space-y-5"},J={class:"flex flex-col gap-2"},O=w(()=>e("label",{for:"login-username",class:"text-sm font-medium text-gray-200"},"Email",-1)),R={class:"flex flex-col gap-2"},H=w(()=>e("label",{for:"login-password",class:"text-sm font-medium text-gray-200"},"Mot de passe",-1)),G={key:0,class:"mt-4 rounded-lg border border-red-500/40 bg-red-500/10 px-3 py-2 text-xs text-red-200 whitespace-pre-wrap break-words"},K=w(()=>e("div",{class:"font-semibold mb-1"},"Connexion impossible",-1)),Q={class:"mt-6 flex gap-3"},W=["disabled"],X=["disabled"],Y=V({__name:"LoginForm",setup(c){const u=M(),{authUser:n}=I(),l=f(""),a=f(""),t=f(!1),m=f(""),$=()=>{const r=Array.isArray(u.query.redirectPath)?u.query.redirectPath[0]:u.query.redirectPath;return typeof r=="string"&&r.trim().length>0?r:"/"},k=()=>{l.value="",a.value="",m.value=""},C=async()=>{if(!t.value){m.value="",t.value=!0;try{await n({username:l.value,password:a.value},$())}catch(r){if(typeof r=="string"&&r.trim().length>0)m.value=r;else if(r&&typeof r=="object")try{m.value=JSON.stringify(r,null,2)}catch{m.value=String(r)}else m.value="Erreur lors de la connexion"}finally{t.value=!1}}};return(r,x)=>(v(),g("div",N,[T,e("div",D,[e("div",J,[O,p(e("input",{id:"login-username","onUpdate:modelValue":x[0]||(x[0]=b=>l.value=b),type:"email",autocomplete:"username",class:"form-input",placeholder:"vous@email.com"},null,512),[[_,l.value]])]),e("div",R,[H,p(e("input",{id:"login-password","onUpdate:modelValue":x[1]||(x[1]=b=>a.value=b),type:"password",autocomplete:"current-password",class:"form-input",placeholder:"Votre mot de passe"},null,512),[[_,a.value]])])]),m.value?(v(),g("div",G,[K,e("div",null,y(m.value),1)])):S("",!0),e("div",Q,[e("button",{type:"button",class:"flex-1 rounded-lg border border-gray-600 px-3 py-2 text-sm text-gray-200 hover:border-gray-500 hover:text-white transition-colors",disabled:t.value,onClick:k}," Annuler ",8,W),e("button",{type:"button",class:"flex-1 rounded-lg bg-gradient-to-r from-emerald-700 to-teal-700 px-3 py-2 text-sm font-semibold text-gray-100 hover:from-emerald-600 hover:to-teal-600 disabled:opacity-60 disabled:cursor-not-allowed transition-colors",disabled:t.value||!l.value.trim()||!a.value.trim(),onClick:C},y(t.value?"Connexion...":"Valider"),9,X)])]))}});const Z=F(Y,[["__scopeId","data-v-e52f047f"]]),d=c=>(z("data-v-36b294aa"),c=c(),E(),c),ee={class:"rounded-xl border border-gray-700 bg-elevated p-6 md:p-7"},te={class:"mb-6"},se=d(()=>e("h2",{class:"text-xl font-semibold text-gray-200"},"Inscription",-1)),oe=d(()=>e("p",{class:"mt-2 text-sm text-gray-300"},"Crée ton compte pour démarrer.",-1)),ae={class:"mt-3 text-xs font-medium text-gray-400"},le=d(()=>e("div",{class:"mt-3 h-px w-full bg-gradient-to-r from-emerald-400/65 via-teal-300/45 to-transparent"},null,-1)),re={class:"mt-2 h-1.5 w-full rounded-full bg-neutral-800/90"},ne={key:0,class:"space-y-5"},ie={class:"flex flex-col gap-2"},de=d(()=>e("label",{for:"signin-email",class:"text-sm font-medium text-gray-200"},"Email*",-1)),ue={class:"flex flex-col gap-2"},ce=d(()=>e("label",{for:"signin-password",class:"text-sm font-medium text-gray-200"},"Mot de passe*",-1)),me={key:1,class:"space-y-5"},pe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ve={class:"flex flex-col gap-2"},_e=d(()=>e("label",{for:"signin-first-name",class:"text-sm font-medium text-gray-200"},"Prénom",-1)),fe={class:"flex flex-col gap-2"},ge=d(()=>e("label",{for:"signin-last-name",class:"text-sm font-medium text-gray-200"},"Nom",-1)),xe={class:"flex flex-col gap-2"},ye=d(()=>e("label",{for:"signin-photo",class:"text-sm font-medium text-gray-200"},"Photo de profil (URL)",-1)),be=["src"],he={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},we={class:"flex flex-col gap-2"},$e=d(()=>e("label",{for:"signin-pseudo",class:"text-sm font-medium text-gray-200"},"Pseudo",-1)),ke={class:"flex flex-col gap-2"},Ce=d(()=>e("label",{for:"signin-handle",class:"text-sm font-medium text-gray-200"},"Handle* (@...)",-1)),Se=d(()=>e("p",{class:"text-xs text-gray-400"},"Ce handle sera visible publiquement.",-1)),Ve={class:"inline-flex items-center gap-2 text-sm text-gray-200"},Ue={key:2,class:"mt-4 rounded-lg border border-red-500/40 bg-red-500/10 px-3 py-2 text-xs text-red-200 whitespace-pre-wrap break-words"},Pe=d(()=>e("div",{class:"font-semibold mb-1"},"Inscription impossible",-1)),Ie={class:"mt-6 flex gap-3"},ze=["disabled"],Ee=["disabled"],Fe=V({__name:"SignInForm",setup(c){const{createNewUser:u}=I(),n=f(""),l=f(!1),a=f(1),t=f({username:"",email:"",first_name:"",last_name:"",profile_picture_url:"",handle:"@",password:"",pseudonym:"",pseudonymized:!1});A(()=>[t.value.first_name,t.value.last_name],([i,s])=>{if(i||s){const o=i?i.toLowerCase().replace(/\s+/g,"_"):"",h=s?s.toLowerCase().replace(/\s+/g,"_"):"";o&&h?t.value.handle="@"+o+"_"+h:o?t.value.handle="@"+o:h?t.value.handle="@"+h:t.value.handle="@"}else t.value.handle="@"},{immediate:!0});const m=()=>{t.value={username:"",email:"",first_name:"",last_name:"",profile_picture_url:"",handle:"@",password:"",pseudonym:"",pseudonymized:!1},a.value=1,n.value=""},$=()=>{!t.value.email.trim()||!t.value.password.trim()||(n.value="",a.value=2)},k=()=>{a.value=1,n.value=""},C=L(()=>l.value?!0:a.value===1?!t.value.email.trim()||!t.value.password.trim():!t.value.email.trim()||!t.value.password.trim()||!t.value.handle.trim()),r=async()=>{if(a.value===1){$();return}await b()},x=()=>{if(a.value===1){m();return}k()},b=async()=>{if(!l.value){n.value="",l.value=!0;try{await u(t.value)}catch(i){if(typeof i=="string"&&i.trim().length>0)n.value=i;else if(i&&typeof i=="object")try{n.value=JSON.stringify(i,null,2)}catch{n.value=String(i)}else n.value=String(i??"Erreur lors de la création du compte")}finally{l.value=!1}}};return(i,s)=>(v(),g("div",ee,[e("div",te,[se,oe,e("p",ae,"Étape "+y(a.value)+" / 2",1),le,e("div",re,[e("div",{class:"h-full rounded-full bg-gradient-to-r from-emerald-500 to-teal-400 transition-all duration-200",style:j({width:a.value===1?"50%":"100%"})},null,4)])]),a.value===1?(v(),g("div",ne,[e("div",ie,[de,p(e("input",{id:"signin-email","onUpdate:modelValue":s[0]||(s[0]=o=>t.value.email=o),type:"email",autocomplete:"email",placeholder:"vous@email.com",class:"form-input"},null,512),[[_,t.value.email]])]),e("div",ue,[ce,p(e("input",{id:"signin-password","onUpdate:modelValue":s[1]||(s[1]=o=>t.value.password=o),type:"password",autocomplete:"new-password",placeholder:"Mot de passe",class:"form-input"},null,512),[[_,t.value.password]])])])):(v(),g("div",me,[e("div",pe,[e("div",ve,[_e,p(e("input",{id:"signin-first-name","onUpdate:modelValue":s[2]||(s[2]=o=>t.value.first_name=o),type:"text",autocomplete:"given-name",placeholder:"Prénom",class:"form-input"},null,512),[[_,t.value.first_name]])]),e("div",fe,[ge,p(e("input",{id:"signin-last-name","onUpdate:modelValue":s[3]||(s[3]=o=>t.value.last_name=o),type:"text",autocomplete:"family-name",placeholder:"Nom",class:"form-input"},null,512),[[_,t.value.last_name]])])]),e("div",xe,[ye,p(e("input",{id:"signin-photo","onUpdate:modelValue":s[4]||(s[4]=o=>t.value.profile_picture_url=o),type:"url",autocomplete:"url",placeholder:"https://...",class:"form-input"},null,512),[[_,t.value.profile_picture_url]])]),t.value.profile_picture_url!==""?(v(),g("img",{key:0,class:"rounded-lg max-h-36 object-cover border border-gray-700 mt-1",src:t.value.profile_picture_url},null,8,be)):S("",!0),e("div",he,[e("div",we,[$e,p(e("input",{id:"signin-pseudo","onUpdate:modelValue":s[5]||(s[5]=o=>t.value.pseudonym=o),type:"text",placeholder:"Votre pseudo",class:"form-input"},null,512),[[_,t.value.pseudonym]])]),e("div",ke,[Ce,p(e("input",{id:"signin-handle","onUpdate:modelValue":s[6]||(s[6]=o=>t.value.handle=o),type:"text",placeholder:"@votre_handle",class:"form-input"},null,512),[[_,t.value.handle]]),Se])]),e("label",Ve,[p(e("input",{"onUpdate:modelValue":s[7]||(s[7]=o=>t.value.pseudonymized=o),type:"checkbox",class:"rounded border-gray-600 bg-neutral-900 text-neutral-500 focus:ring-neutral-500"},null,512),[[q,t.value.pseudonymized]]),B(" Ne montrer que votre pseudo ")])])),n.value?(v(),g("div",Ue,[Pe,e("div",null,y(n.value),1)])):S("",!0),e("div",Ie,[e("button",{type:"button",class:"flex-1 rounded-lg border border-gray-600 px-3 py-2 text-sm text-gray-200 hover:border-gray-500 hover:text-white transition-colors",disabled:l.value,onClick:x},y(a.value===1?"Annuler":"Précédent"),9,ze),e("button",{type:"button",class:"flex-1 rounded-lg bg-gradient-to-r from-emerald-700 to-teal-700 px-3 py-2 text-sm font-semibold text-gray-100 hover:from-emerald-600 hover:to-teal-600 disabled:opacity-60 disabled:cursor-not-allowed transition-colors",disabled:C.value,onClick:r},y(a.value===1?"Continuer":l.value?"Création...":"Valider"),9,Ee)])]))}});const Me=F(Fe,[["__scopeId","data-v-36b294aa"]]),Ae={class:"min-h-screen text-gray-100 p-4 md:p-10 md:w-10/12 mx-auto"},Le={class:"mx-auto max-w-xl pt-2 md:pt-6"},je=e("h1",{class:"text-2xl font-bold tracking-tight text-gray-200"},"Bienvenue",-1),qe=e("p",{class:"mt-2 text-sm text-gray-400"}," Connecte-toi pour accéder à ton studio et reprendre ton travail. ",-1),Be={class:"relative mt-6"},Ne=e("div",{class:"pointer-events-none absolute -inset-x-4 -inset-y-3 -z-10 rounded-2xl bg-gradient-to-r from-emerald-500/12 via-amber-400/8 to-teal-500/12 blur-xl"},null,-1),Te={class:"inline-flex rounded-lg border border-gray-700 bg-elevated p-1"},De={class:"mt-4"},Oe=V({__name:"LoginPage",setup(c){const u=f(!1);return(n,l)=>(v(),g("div",Ae,[e("div",Le,[je,qe,e("div",Be,[Ne,e("div",Te,[e("button",{type:"button",class:U(["px-4 py-2 text-sm rounded-md border border-transparent transition-colors",u.value?"text-gray-400 hover:text-emerald-200":"bg-emerald-700/35 border-emerald-500/30 text-emerald-100"]),onClick:l[0]||(l[0]=a=>u.value=!1)}," Connexion ",2),e("button",{type:"button",class:U(["px-4 py-2 text-sm rounded-md border border-transparent transition-colors",u.value?"bg-emerald-700/35 border-emerald-500/30 text-emerald-100":"text-gray-400 hover:text-emerald-200"]),onClick:l[1]||(l[1]=a=>u.value=!0)}," Inscription ",2)])]),e("div",De,[u.value?(v(),P(Me,{key:1})):(v(),P(Z,{key:0}))])])]))}});export{Oe as default};
