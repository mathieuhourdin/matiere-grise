import{_ as n}from"./TextInput.vue_vue_type_script_setup_true_lang-00c10724.js";import{d as V,i as g,u as b,r as p,c,l as d,D as k,e as s,w as i,z as _,b as m,f as v,y as x,k as U,h as w}from"./index-97bf9060.js";import{_ as $}from"./CheckboxInput.vue_vue_type_script_setup_true_lang-5472ce1b.js";const C={class:"p-2 border border-slate-400 dark:border-gray-600 h-fit shadow rounded bg-white dark:bg-elevated text-gray-900 dark:text-gray-100 transition-colors duration-200"},h={class:"flex"},P=d("div",{class:"m-2"},"Connectez-vous",-1),z={class:"flex"},B=V({__name:"LoginForm",setup(y){const r=g(),{authUser:e}=b(),o=p(""),t=p(""),l=async()=>{console.log("Submit"),console.log(o.value),await e({username:o.value,password:t.value},r.query.redirectPath)};return(a,u)=>(m(),c("div",C,[d("div",h,[P,k(a.$slots,"default")]),s(n,{class:"m-2",label:"Username",modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=f=>o.value=f),autocomplete:"username"},null,8,["modelValue"]),s(n,{class:"m-2",type:"password",label:"Password",modelValue:t.value,"onUpdate:modelValue":u[1]||(u[1]=f=>t.value=f),autocomplete:"current-password"},null,8,["modelValue"]),d("div",z,[s(_,{class:"ml-auto m-2",type:"valid",onClick:l},{default:i(()=>[v("Valider")]),_:1}),s(_,{class:"m-2",type:"abort",onClick:l},{default:i(()=>[v("Annuler")]),_:1})])]))}}),L={class:"md:w-2/5 h-fit border shadow rounded p-4"},N=d("div",{class:"m-2"},"Inscription",-1),S=["src"],q={class:"mt-2 flex"},A=V({__name:"SignInForm",setup(y){const{createNewUser:r}=b(),e=p({username:"",email:"",first_name:"",last_name:"",profile_picture_url:"",handle:"@",password:"",pseudonym:"",pseudonymized:!1});x(()=>[e.value.first_name,e.value.last_name],([t,l])=>{if(t||l){const a=t?t.toLowerCase().replace(/\s+/g,"_"):"",u=l?l.toLowerCase().replace(/\s+/g,"_"):"";a&&u?e.value.handle="@"+a+"_"+u:a?e.value.handle="@"+a:u?e.value.handle="@"+u:e.value.handle="@"}else e.value.handle="@"},{immediate:!0});const o=async()=>{await r(e.value)};return(t,l)=>(m(),c("div",L,[N,s(n,{class:"mt-2",label:"Email*",modelValue:e.value.email,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.email=a),autocomplete:"email"},null,8,["modelValue"]),s(n,{class:"mt-2",label:"Prénom",modelValue:e.value.first_name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.first_name=a),autocomplete:"given-name"},null,8,["modelValue"]),s(n,{class:"mt-2",label:"Nom",modelValue:e.value.last_name,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.last_name=a),autocomplete:"family-name"},null,8,["modelValue"]),s(n,{class:"mt-2",label:"Photo de profil",modelValue:e.value.profile_picture_url,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.profile_picture_url=a),autocomplete:"url"},null,8,["modelValue"]),e.value.profile_picture_url!=""?(m(),c("img",{key:0,class:"rounded mt-2 mx-auto",src:e.value.profile_picture_url},null,8,S)):U("",!0),s(n,{class:"mt-2",label:"Pseudo",modelValue:e.value.pseudonym,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.pseudonym=a)},null,8,["modelValue"]),s($,{class:"mt-2",modelValue:e.value.pseudonymized,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.pseudonymized=a),label:"Ne montrer que votre pseudo"},null,8,["modelValue"]),s(n,{class:"mt-2",label:"handle* (@comme_sur_insta)",modelValue:e.value.handle,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.handle=a)},null,8,["modelValue"]),s(n,{class:"mt-2",label:"Password*",modelValue:e.value.password,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.password=a),type:"password"},null,8,["modelValue"]),d("div",q,[s(_,{class:"ml-auto m-2",type:"valid",onClick:o},{default:i(()=>[v("Valider")]),_:1}),s(_,{class:"m-2",type:"abort",onClick:o},{default:i(()=>[v("Annuler")]),_:1})])]))}}),E={class:"mt-6 flex justify-center"},F={class:"ml-auto flex items-center"},R=V({__name:"LoginPage",setup(y){const r=p(!1);return(e,o)=>(m(),c("div",E,[r.value?(m(),w(A,{key:1})):(m(),w(B,{key:0},{default:i(()=>[d("div",F,[d("div",{class:"text-xs underline p-2",onClick:o[0]||(o[0]=t=>r.value=!0)},"Créer un compte")])]),_:1}))]))}});export{R as default};
