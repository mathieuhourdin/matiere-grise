import{_ as y}from"./useThoughtInputs-05b30736.js";import{d as h,r as _,l as g,D as I,v as x,B as $,o as l,c as r,f as o,g as C,E as b,G as E,a as p,q as B,x as S,t as i,h as c,w as m,y as v,A as L,i as w,e as T,F as N,p as V,H as D}from"./index-b8ad1093.js";const F={class:"flex"},M=h({__name:"ModalSheet",props:{open:{type:Boolean,default:!1}},emits:["close"],setup(d,{emit:n}){const u=d,t=_(!1);return g(()=>{t.value=u.open}),I(()=>{const a=s=>{(s.key==="Escape"||s.key==="Enter"||s.key==="Esc"||s.keyCode===27)&&n("close")};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}),x($(u).open,a=>t.value=a),(a,s)=>t.value?(l(),r("div",{key:0,tabindex:"0",onKeyup:s[2]||(s[2]=E(e=>n("close"),["esc"])),class:"fixed top-0 left-0 w-full h-full z-10 bg-slate-500/50",onClick:s[3]||(s[3]=e=>n("close"))},[o("div",{class:"max-w-xl overflow-y-scroll max-h-screen mb-10 bg-white mx-auto mt-6 p-4 rounded shadow",onClick:s[1]||(s[1]=b(()=>{},["stop"]))},[o("div",F,[o("div",{class:"ml-auto",onClick:s[0]||(s[0]=e=>n("close"))},"x")]),C(a.$slots,"default")])],32)):p("",!0)}}),O={class:"w-full md:w-96"},z={key:0,class:"text-xs italic mb-2"},A={class:"border shadow-lg rounded p-4 md:w-96"},K={class:"flex"},R=["src"],U={class:"flex flex-wrap w-full",style:{"margin-top":"-8px"}},q={class:"text-2xs italic"},G={class:"ml-auto m-1 w-1/3"},H={class:"text-2xs"},P={class:"flex flex-wrap"},W={key:0,class:"text-2xs italic"},j=h({__name:"ThoughtInputCard",props:{thoughtInput:{}},setup(d){const n=d,{getUserById:u}=T(),t=_(null);B(()=>t.value&&t.value.id===user.value.id),g(async()=>t.value=await u(n.thoughtInput.input_user_id));const a=e=>e.toLocaleString("fr-FR",{hour:"numeric",weekday:"short",day:"numeric",month:"short",year:"2-digit"}),s=e=>e.length>200?e.slice(0,150)+"...":e;return(e,k)=>{const f=S("router-link");return l(),r("div",O,[e.thoughtInput.usage_reason?(l(),r("div",z,i(e.thoughtInput.usage_reason),1)):p("",!0),o("div",A,[o("div",K,[o("img",{class:"w-8 h-fit mr-4",src:e.thoughtInput.resource_image_link},null,8,R),o("div",null,[o("div",null,[c(f,{to:"/thought_inputs/"+e.thoughtInput.id},{default:m(()=>[v(i(e.thoughtInput.resource_title),1)]),_:1},8,["to"])]),o("div",U,[o("div",q,i(e.thoughtInput.resource_author_name),1),o("div",G,[c(L,{"progress-value":e.thoughtInput.input_progress},null,8,["progress-value"])])]),o("div",H,i(s(e.thoughtInput.input_comment)),1)])]),o("div",P,[e.thoughtInput.input_date?(l(),r("div",W,i(a(e.thoughtInput.input_date)),1)):p("",!0),t.value?(l(),w(f,{key:1,to:"/users/"+t.value.id,class:"ml-auto text-2xs underline"},{default:m(()=>[v(i(t.value.first_name)+" "+i(t.value.last_name),1)]),_:1},8,["to"])):p("",!0)])])])}}}),J={class:"w-fit"},Q=h({__name:"ThoughtInputCardWithPopup",props:{thoughtInput:{}},setup(d){const n=_(!1);return(u,t)=>(l(),r("div",J,[c(M,{open:n.value,onClose:t[0]||(t[0]=a=>n.value=!1)},{default:m(()=>[c(y,{"thought-input":u.thoughtInput},null,8,["thought-input"])]),_:1},8,["open"]),c(j,{class:"md:w-96","thought-input":u.thoughtInput,onClick:t[1]||(t[1]=a=>n.value=!0)},null,8,["thought-input"])]))}}),X={class:"relative max-w-full"},Y={key:0,class:"absolute md:border h-full start-1/2"},et=h({__name:"ThoughtInputsList",props:{thoughtInputs:{},center:{type:Boolean,default:!1}},emits:["select"],setup(d,{emit:n}){const u=t=>{console.log("Select"),n("select",t)};return(t,a)=>(l(),r("div",X,[t.center?p("",!0):(l(),r("div",Y)),(l(!0),r(N,null,V(t.thoughtInputs,(s,e)=>(l(),w(Q,{key:s.id,class:D(["mb-4 md:mb-1 mx-auto max-w-full max-w-fit p-1",{"md:ml-0":e%2==0&&!t.center,"md:mr-0":!t.center}]),"thought-input":s,onClick:k=>u(s)},null,8,["class","thought-input","onClick"]))),128))]))}});export{et as _,M as a};
