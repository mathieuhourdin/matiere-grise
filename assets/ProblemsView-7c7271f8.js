import{u as R,a as f}from"./useProblem-65e556c3.js";import{d as v,r as h,g,s as A,o as l,c as i,k as y,w as F,i as s,t as d,a as w,e as $,f as B,F as C,j as x,q as I,v as L,p as N}from"./index-75030acf.js";import{u as V}from"./useResource-cdf1f65b.js";const D={class:"border shadow-xl rounded m-2 p-4 h-72 w-60"},U={class:"max-h-full"},j=["src"],q={class:"h-full"},S={class:"mb-2"},T={key:0,class:"text-2xs italic",style:{"margin-top":"-8px"}},E={class:"text-2xs mb-auto"},M={class:"flex mt-2"},W={class:"text-2xs italic mt-auto"},z={class:"ml-auto text-2xs underline"},G=v({__name:"ProblemCard",props:{problem:{}},setup(_){const c=_,a=o=>o?o.toLocaleString("fr-FR",{hour:"numeric",weekday:"short",day:"numeric",month:"short",year:"2-digit"}):"",m=h(null),n=h(null),p=o=>o.length>200?o.slice(0,150)+"...":o,{getAuthorInteractionForResource:u}=V(),e=h([]),{getResourceRelationsForResource:t}=R(),r=async()=>{c.problem.id&&(e.value=await t(c.problem.id))},{getUserById:b}=$(),k=async()=>{m.value=await u(c.problem.id),m.value&&(n.value=await b(m.value.interaction_user_id))};return g(async()=>{await r(),await k()}),(o,X)=>{const P=A("router-link");return l(),i("div",D,[y(P,{to:"/thought_outputs/"+o.problem.id},{default:F(()=>[s("div",U,[s("img",{class:"h-28 mx-auto mb-4",src:o.problem.image_url},null,8,j),s("div",q,[s("div",S,d(o.problem.title),1),n.value?(l(),i("div",T,d(n.value.first_name)+" "+d(n.value.last_name),1)):w("",!0),s("div",E,d(p(o.problem.subtitle)),1),s("div",M,[s("div",W,d(a(o.problem.created_at)),1),s("div",z,d(e.value.length)+" inputs",1)])])])]),_:1},8,["to"])])}}}),H={class:"flex"},J=s("hr",{class:"border-top border-slate-800 border-dashed my-1"},null,-1),K={class:"flex overflow-scroll"},O=v({__name:"CategoryProblemsCarousel",props:{problemsList:{},category:{}},setup(_){const c=_,{newProblem:a,createProblem:m}=f(),n=B(),p=async()=>{const e=a();e.resource.category_id=c.category.id;const t=await m(e);n.push({path:"/thought_outputs/"+t.resource.id,query:{editing:"true"}})},u=e=>e=="default"?"Autres":e;return(e,t)=>(l(),i("div",null,[s("div",H,[s("div",null,d(u(e.category.display_name)),1),s("div",{onClick:p,class:"ml-auto text-sm mr-2 underline"},"Ajouter")]),J,s("div",K,[(l(!0),i(C,null,x(e.problemsList,(r,b)=>(l(),i("div",{class:"mb-4",key:b},[y(G,{problem:r},null,8,["problem"])]))),128))])]))}}),Q={key:0,class:"m-4"},te=v({__name:"ProblemsView",setup(_){const{getProblems:c}=f(),a=h(null),{categories:m}=L(),n=I(()=>m.value.map(e=>(e.problems=p(e),e.problems_count=e.problems?e.problems.length:0,e))),p=u=>{var e,t;return u.display_name=="default"?(e=a.value)==null?void 0:e.filter(r=>r.category_id==null):(t=a.value)==null?void 0:t.filter(r=>r.category_id==u.id)};return g(async()=>a.value=await c()),(u,e)=>(l(),i("div",null,[a.value?(l(),i("div",Q,[(l(!0),i(C,null,x(n.value.sort((t,r)=>r.problems_count-t.problems_count),t=>(l(),N(O,{class:"mt-4",category:t,key:t.id,"problems-list":t.problems},null,8,["category","problems-list"]))),128))])):w("",!0)]))}});export{te as default};
