import{_ as r}from"./TextInput.vue_vue_type_script_setup_true_lang-26753b96.js";import{d as V,i as x,u as g,r as c,c as p,l as m,K as k,e as t,w as v,z as _,b as d,f,y as h,k as b,t as U,h as w}from"./index-7b431e64.js";import{_ as $}from"./CheckboxInput.vue_vue_type_script_setup_true_lang-7cf91ce3.js";const C={class:"p-2 border border-slate-400 dark:border-gray-600 h-fit shadow rounded bg-white dark:bg-elevated text-gray-900 dark:text-gray-100 transition-colors duration-200"},P={class:"flex"},S=m("div",{class:"m-2"},"Connectez-vous",-1),z={class:"flex"},B=V({__name:"LoginForm",setup(y){const i=x(),{authUser:o}=g(),e=c(""),n=c(""),s=async()=>{console.log("Submit"),console.log(e.value),await o({username:e.value,password:n.value},i.query.redirectPath)};return(a,l)=>(d(),p("div",C,[m("div",P,[S,k(a.$slots,"default")]),t(r,{class:"m-2",label:"Username",modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=u=>e.value=u),autocomplete:"username"},null,8,["modelValue"]),t(r,{class:"m-2",type:"password",label:"Password",modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=u=>n.value=u),autocomplete:"current-password"},null,8,["modelValue"]),m("div",z,[t(_,{class:"ml-auto m-2",type:"valid",onClick:s},{default:v(()=>[f("Valider")]),_:1}),t(_,{class:"m-2",type:"abort",onClick:s},{default:v(()=>[f("Annuler")]),_:1})])]))}}),E={class:"md:w-2/5 h-fit border shadow rounded p-4"},L=m("div",{class:"m-2"},"Inscription",-1),N=["src"],j={key:1,class:"mt-3 rounded border border-red-400/50 bg-red-100/60 px-3 py-2 text-sm text-red-700 whitespace-pre-wrap break-words"},q={class:"mt-2 flex"},A=V({__name:"SignInForm",setup(y){const{createNewUser:i}=g(),o=c(""),e=c({username:"",email:"",first_name:"",last_name:"",profile_picture_url:"",handle:"@",password:"",pseudonym:"",pseudonymized:!1});h(()=>[e.value.first_name,e.value.last_name],([s,a])=>{if(s||a){const l=s?s.toLowerCase().replace(/\s+/g,"_"):"",u=a?a.toLowerCase().replace(/\s+/g,"_"):"";l&&u?e.value.handle="@"+l+"_"+u:l?e.value.handle="@"+l:u?e.value.handle="@"+u:e.value.handle="@"}else e.value.handle="@"},{immediate:!0});const n=async()=>{o.value="";try{await i(e.value)}catch(s){if(typeof s=="string"&&s.trim().length>0){o.value=s;return}if(s&&typeof s=="object"){try{o.value=JSON.stringify(s,null,2)}catch{o.value=String(s)}return}o.value=String(s??"Erreur lors de la création du compte")}};return(s,a)=>(d(),p("div",E,[L,t(r,{class:"mt-2",label:"Email*",modelValue:e.value.email,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.email=l),autocomplete:"email"},null,8,["modelValue"]),t(r,{class:"mt-2",label:"Prénom",modelValue:e.value.first_name,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.first_name=l),autocomplete:"given-name"},null,8,["modelValue"]),t(r,{class:"mt-2",label:"Nom",modelValue:e.value.last_name,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.last_name=l),autocomplete:"family-name"},null,8,["modelValue"]),t(r,{class:"mt-2",label:"Photo de profil",modelValue:e.value.profile_picture_url,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.profile_picture_url=l),autocomplete:"url"},null,8,["modelValue"]),e.value.profile_picture_url!=""?(d(),p("img",{key:0,class:"rounded mt-2 mx-auto",src:e.value.profile_picture_url},null,8,N)):b("",!0),t(r,{class:"mt-2",label:"Pseudo",modelValue:e.value.pseudonym,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.pseudonym=l)},null,8,["modelValue"]),t($,{class:"mt-2",modelValue:e.value.pseudonymized,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.pseudonymized=l),label:"Ne montrer que votre pseudo"},null,8,["modelValue"]),t(r,{class:"mt-2",label:"handle* (@comme_sur_insta)",modelValue:e.value.handle,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.handle=l)},null,8,["modelValue"]),t(r,{class:"mt-2",label:"Password*",modelValue:e.value.password,"onUpdate:modelValue":a[7]||(a[7]=l=>e.value.password=l),type:"password"},null,8,["modelValue"]),o.value?(d(),p("div",j,U(o.value),1)):b("",!0),m("div",q,[t(_,{class:"ml-auto m-2",type:"valid",onClick:n},{default:v(()=>[f("Valider")]),_:1}),t(_,{class:"m-2",type:"abort",onClick:n},{default:v(()=>[f("Annuler")]),_:1})])]))}}),F={class:"mt-6 flex justify-center"},I={class:"ml-auto flex items-center"},M=V({__name:"LoginPage",setup(y){const i=c(!1);return(o,e)=>(d(),p("div",F,[i.value?(d(),w(A,{key:1})):(d(),w(B,{key:0},{default:v(()=>[m("div",I,[m("div",{class:"text-xs underline p-2",onClick:e[0]||(e[0]=n=>i.value=!0)},"Créer un compte")])]),_:1}))]))}});export{M as default};
