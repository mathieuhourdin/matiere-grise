import{C as k,d as g,r as f,l as v,x as D,o as n,c as u,h as y,w as T,f as t,t as m,m as P,F as w,p as C,q as $,a as A,s as F,i as N}from"./index-6d382f36.js";import{a as q,u as B}from"./useThoughtOutput-2ddd6622.js";const{createThoughtOutput:I}=q(),L=()=>({title:"",description:"",content:"",publishing_state:"drft",image_url:"",output_type:"pblm",progress:0,potential_improvements:"",maturing_state:""}),R=s=>s,V=async()=>(await k.get("/problems")).data.map(r=>R(r));function x(){return{newProblem:L,getProblems:V,createProblem:I}}const O={class:"border shadow-xl rounded m-2 p-4 h-72 w-60"},j={class:"max-h-full"},S=["src"],U={class:"h-full"},W={class:"mb-2"},E={class:"text-2xs italic",style:{"margin-top":"-8px"}},M={class:"text-2xs mb-auto"},z={class:"flex mt-2"},G={class:"text-2xs italic mt-auto"},H={class:"ml-auto text-2xs underline"},J=g({__name:"ProblemCard",props:{problem:{}},setup(s){const r=s,d=e=>new Date(e.split(".")[0]).toLocaleString("fr-FR",{hour:"numeric",weekday:"short",day:"numeric",month:"short",year:"2-digit"}),p=e=>e.length>200?e.slice(0,150)+"...":e,i=f([]),{getThoughtInputUsagesForThoughtOutput:a}=B(),h=async()=>{i.value=await a(r.problem.id)};return v(()=>h()),(e,c)=>{const _=D("router-link");return n(),u("div",O,[y(_,{to:"/thought_outputs/"+e.problem.id},{default:T(()=>[t("div",j,[t("img",{class:"h-28 mx-auto mb-4",src:e.problem.image_url},null,8,S),t("div",U,[t("div",W,m(e.problem.title),1),t("div",E,m(e.problem.owner_id),1),t("div",M,m(p(e.problem.description)),1),t("div",z,[t("div",G,m(d(e.problem.created_at)),1),t("div",H,m(i.value.length)+" inputs",1)])])])]),_:1},8,["to"])])}}}),K={class:"flex"},Q=t("hr",{class:"border-top border-slate-800 border-dashed my-1"},null,-1),X={class:"flex overflow-scroll"},Y=g({__name:"CategoryProblemsCarousel",props:{problemsList:{},category:{}},setup(s){const r=s,{newProblem:d,createProblem:p}=x(),i=P(),a=async()=>{const e=d();e.category_id=r.category.id;const c=await p(e);i.push({path:"/thought_outputs/"+c.id,query:{editing:!0}})},h=e=>e=="default"?"Autres":e;return(e,c)=>(n(),u("div",null,[t("div",K,[t("div",null,m(h(e.category.display_name)),1),t("div",{onClick:a,class:"ml-auto text-sm mr-2 underline"},"Ajouter")]),Q,t("div",X,[(n(!0),u(w,null,C(e.problemsList,(_,l)=>(n(),u("div",{class:"mb-4",key:l},[y(J,{problem:_},null,8,["problem"])]))),128))])]))}}),Z={key:0,class:"m-4"},oe=g({__name:"ProblemsView",setup(s){const r=P(),{getProblems:d,newProblem:p,createProblem:i}=x(),a=f(null),{categories:h}=F(),e=async()=>{const l=p(),o=await i(l);r.push({path:"/thought_outputs/"+o.id,query:{editing:!0}})},c=$(()=>h.value.map(o=>(o.problems=_(o),o)).sort((o,b)=>o.problems.length<b.problems.length)),_=l=>l.display_name=="default"?a.value.filter(o=>o.category_id==null):a.value.filter(o=>o.category_id==l.id);return v(async()=>a.value=await d()),(l,o)=>(n(),u("div",null,[a.value?(n(),u("div",Z,[t("div",{class:"underline italic",onClick:e}," Ajouter une problÃ©matique "),(n(!0),u(w,null,C(c.value,b=>(n(),N(Y,{class:"mt-4",category:b,key:b.id,"problems-list":b.problems},null,8,["category","problems-list"]))),128))])):A("",!0)]))}});export{oe as default};
