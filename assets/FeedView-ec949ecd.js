import{_ as f}from"./FeedList.vue_vue_type_script_setup_true_lang-174e58cb.js";import{d as u,r as b,o,c as m,w as v,a as c,t as x,b as p,e as w,f as l,F as h,g as y,h as g,i as d,u as k}from"./index-4c6af3e5.js";import{u as F}from"./useResource-ef572ee1.js";import"./useResourceRelations-e399e438.js";const D={class:"w-10 mx-auto"},$=["src"],B={class:"text-center overflow-hidden mt-1 text-xs",style:{display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"3"}},R=u({__name:"FollowedProblem",props:{problem:{}},setup(_){return(t,s)=>{const r=b("router-link");return o(),m(r,{to:"/resources/"+t.problem.id+"/feed",class:"m-1"},{default:v(()=>[c("div",D,[c("img",{src:t.problem.image_url,class:"border-2 border-zinc-400 rounded-full max-w-full aspect-[2/2] object-cover object-center w-full"},null,8,$)]),c("div",B,x(t.problem.title),1)]),_:1},8,["to"])}}}),C={class:"flex"},I=u({__name:"FollowedProblemsList",setup(_){const{getResources:t}=F(),s=p([]);return w(async()=>{s.value=await t({is_external:!1,resource_type:"pblm"})}),(r,a)=>(o(),l("div",C,[(o(!0),l(h,null,y(s.value,n=>(o(),m(R,{problem:n,class:"shrink-0 grow-0 w-16"},null,8,["problem"]))),256))]))}}),V={class:"mt-1"},S=u({__name:"FeedView",setup(_){const{getReadAndWriteInteractions:t}=k(),s=p([]),r=g(()=>s.value.map(e=>({resource:e.resource,date:e.interaction_date,post_date:e.interaction_type==="inpt"?e.interaction_date:new Date(e.resource.created_at),user_id:e.interaction_user_id,context_comment:e.interaction_comment,progress:e.interaction_progress,...e})).sort((e,i)=>a(i)-a(e))),a=e=>e.interaction_type==="inpt"?new Date(e.created_at):e.resource.updated_at?new Date(e.resource.updated_at):new Date(e.resource.created_at),n=async()=>s.value=await t();return w(async()=>{await n()}),(e,i)=>(o(),l("div",V,[d(I,{class:"overflow-scroll mb-2 md:mx-8",style:{"scrollbar-width":"none","-ms-overflow-style":"none"}}),d(f,{"interactions-list":r.value,class:"md:w-2/3 mx-auto"},null,8,["interactions-list"])]))}});export{S as default};
